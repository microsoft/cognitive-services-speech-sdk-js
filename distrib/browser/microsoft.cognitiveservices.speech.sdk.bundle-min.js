!function(r){var n={};function o(e){if(n[e])return n[e].exports;var t=n[e]={i:e,l:!1,exports:{}};return r[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=r,o.c=n,o.d=function(e,t,r){o.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=21)}([function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(42);t.AudioConfig=n.AudioConfig;var o=r(7);t.AudioStreamFormat=o.AudioStreamFormat;var i=r(19);t.AudioInputStream=i.AudioInputStream,t.PullAudioInputStream=i.PullAudioInputStream,t.PushAudioInputStream=i.PushAudioInputStream;var s=r(43);t.CancellationReason=s.CancellationReason;var c=r(44);t.PullAudioInputStreamCallback=c.PullAudioInputStreamCallback;var a=r(45);t.KeywordRecognitionModel=a.KeywordRecognitionModel;var u=r(46);t.SessionEventArgs=u.SessionEventArgs;var p=r(47);t.RecognitionEventArgs=p.RecognitionEventArgs;var f=r(48);t.OutputFormat=f.OutputFormat;var l=r(49);t.IntentRecognitionEventArgs=l.IntentRecognitionEventArgs;var v=r(50);t.RecognitionResult=v.RecognitionResult;var d=r(51);t.SpeechRecognitionResult=d.SpeechRecognitionResult;var h=r(52);t.IntentRecognitionResult=h.IntentRecognitionResult;var g=r(53);t.LanguageUnderstandingModel=g.LanguageUnderstandingModel;var y=r(54);t.SpeechRecognitionEventArgs=y.SpeechRecognitionEventArgs;var m=r(55);t.SpeechRecognitionCanceledEventArgs=m.SpeechRecognitionCanceledEventArgs;var S=r(56);t.TranslationRecognitionEventArgs=S.TranslationRecognitionEventArgs;var b=r(57);t.TranslationSynthesisEventArgs=b.TranslationSynthesisEventArgs;var R=r(58);t.TranslationRecognitionResult=R.TranslationRecognitionResult;var C=r(59);t.TranslationSynthesisResult=C.TranslationSynthesisResult;var I=r(60);t.ResultReason=I.ResultReason;var P=r(61);t.SpeechConfig=P.SpeechConfig;var E=r(87);t.SpeechTranslationConfig=E.SpeechTranslationConfig;var O=r(88);t.PropertyCollection=O.PropertyCollection;var w=r(89);t.PropertyId=w.PropertyId;var _=r(90);t.Recognizer=_.Recognizer;var A=r(91);t.SpeechRecognizer=A.SpeechRecognizer;var T=r(92);t.IntentRecognizer=T.IntentRecognizer;var j=r(93);t.TranslationRecognizer=j.TranslationRecognizer;var D=r(94);t.Translations=D.Translations;var M=r(95);t.NoMatchReason=M.NoMatchReason;var N=r(96);t.NoMatchDetails=N.NoMatchDetails;var z=r(97);t.TranslationRecognitionCanceledEventArgs=z.TranslationRecognitionCanceledEventArgs;var x=r(98);t.IntentRecognitionCanceledEventArgs=x.IntentRecognitionCanceledEventArgs;var L=r(99);t.CancellationDetails=L.CancellationDetails;var k=r(100);t.CancellationErrorCode=k.CancellationErrorCode},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),n(t(24)),n(t(25)),n(t(12)),n(t(26)),n(t(3)),n(t(27)),n(t(13)),n(t(5)),n(t(28)),n(t(14)),n(t(15)),n(t(8)),n(t(16)),n(t(17)),n(t(29)),n(t(30)),n(t(31)),n(t(32));var o=t(9);r.TranslationStatus=o.TranslationStatus},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),n(t(62)),n(t(63)),n(t(10)),n(t(64)),n(t(11)),n(t(65)),n(t(67)),n(t(68)),n(t(20)),n(t(70)),n(t(71)),n(t(72)),n(t(73)),n(t(74)),n(t(75)),n(t(76)),n(t(77)),n(t(78)),n(t(79)),n(t(80)),n(t(81)),n(t(82)),n(t(83)),n(t(84)),n(t(85)),r.OutputFormatPropertyName="OutputFormat",r.CancellationErrorCodePropertyName="CancellationErrorCode"},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(r){function e(e){var t=r.call(this,e)||this;return t.name="ArgumentNull",t.message=e,t}return o(e,r),e}(Error);t.ArgumentNullError=i;var s=function(r){function e(e){var t=r.call(this,e)||this;return t.name="InvalidOperation",t.message=e,t}return o(e,r),e}(Error);t.InvalidOperationError=s;var c=function(n){function e(e,t){var r=n.call(this,t)||this;return r.name=e+"ObjectDisposed",r.message=t,r}return o(e,n),e}(Error);t.ObjectDisposedError=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function i(){}return i.throwIfNullOrUndefined=function(e,t){if(null==e)throw new Error("throwIfNullOrUndefined:"+t)},i.throwIfNull=function(e,t){if(null===e)throw new Error("throwIfNull:"+t)},i.throwIfNullOrWhitespace=function(e,t){if(i.throwIfNullOrUndefined(e,t),(""+e).trim().length<1)throw new Error("throwIfNullOrWhitespace:"+t)},i.throwIfDisposed=function(e){if(e)throw new Error("the object is already disposed")},i.throwIfArrayEmptyOrWhitespace=function(e,t){if(i.throwIfNullOrUndefined(e,t),0===e.length)throw new Error("throwIfArrayEmptyOrWhitespace:"+t);for(var r=0,n=e;r<n.length;r++){var o=n[r];i.throwIfNullOrWhitespace(o,t)}},i.throwIfFileDoesNotExist=function(e,t){i.throwIfNullOrWhitespace(e,t)},i}();t.Contracts=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){var r=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=(r+16*Math.random())%16|0;return r=Math.floor(r/16),("x"===e?t:3&t|8).toString(16)})};t.createGuid=n;t.createNoDashGuid=function(){return n().replace(new RegExp("-","g"),"").toUpperCase()}},function(e,r,t){"use strict";function n(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}Object.defineProperty(r,"__esModule",{value:!0}),n(t(23)),n(t(33)),n(t(34)),n(t(35)),n(t(36)),n(t(37)),n(t(38)),n(t(39)),n(t(18)),n(t(41))},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){}return e.getDefaultInputFormat=function(){return s.getDefaultInputFormat()},e.getWaveFormatPCM=function(e,t,r){return new s(e,t,r)},e}(),s=function(o){function e(e,t,r){void 0===e&&(e=16e3),void 0===t&&(t=16),void 0===r&&(r=1);var n=o.call(this)||this;return n.formatTag=1,n.bitsPerSample=t,n.samplesPerSec=e,n.channels=r,n.avgBytesPerSec=n.samplesPerSec*n.channels*(n.bitsPerSample/8),n.blockAlign=n.channels*Math.max(n.bitsPerSample,8),n}return i(e,o),e.getDefaultInputFormat=function(){return new e},e.prototype.close=function(){},e}(t.AudioStreamFormat=o);t.AudioStreamFormatImpl=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,o=r(5);(n=t.EventType||(t.EventType={}))[n.Debug=0]="Debug",n[n.Info=1]="Info",n[n.Warning=2]="Warning",n[n.Error=3]="Error";var i=function(){function e(e,t){this.privName=e,this.privEventId=o.createNoDashGuid(),this.privEventTime=(new Date).toISOString(),this.privEventType=t,this.privMetadata={}}return Object.defineProperty(e.prototype,"name",{get:function(){return this.privName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventId",{get:function(){return this.privEventId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventTime",{get:function(){return this.privEventTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"eventType",{get:function(){return this.privEventType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!0,configurable:!0}),e}();t.PlatformEvent=i},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.TranslationStatus||(t.TranslationStatus={}))[n.Success=0]="Success",n[n.Error=1]="Error"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.privHeaderName=e,this.privToken=t}return Object.defineProperty(e.prototype,"headerName",{get:function(){return this.privHeaderName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"token",{get:function(){return this.privToken},enumerable:!0,configurable:!0}),e}();t.AuthInfo=n},function(e,t,r){"use strict";var n,c=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var p=r(1),o=function(i){function e(e,t,r,n){void 0===n&&(n=p.EventType.Info);var o=i.call(this,e,n)||this;return o.privRequestId=t,o.privSessionId=r,o}return c(e,i),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!0,configurable:!0}),e}(p.PlatformEvent),i=function(i){function e(e,t,r,n){var o=i.call(this,"RecognitionTriggeredEvent",e,t)||this;return o.privAudioSourceId=r,o.privAudioNodeId=n,o}return c(e,i),Object.defineProperty(e.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!0,configurable:!0}),e}(t.SpeechRecognitionEvent=o);t.RecognitionTriggeredEvent=i;var s=function(i){function e(e,t,r,n){var o=i.call(this,"ListeningStartedEvent",e,t)||this;return o.privAudioSourceId=r,o.privAudioNodeId=n,o}return c(e,i),Object.defineProperty(e.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!0,configurable:!0}),e}(o);t.ListeningStartedEvent=s;var a=function(o){function e(e,t,r){var n=o.call(this,"ConnectingToServiceEvent",e,r)||this;return n.privAuthFetchEventid=t,n}return c(e,o),Object.defineProperty(e.prototype,"authFetchEventid",{get:function(){return this.privAuthFetchEventid},enumerable:!0,configurable:!0}),e}(o);t.ConnectingToServiceEvent=a;var f,u,l=function(s){function e(e,t,r,n,o){var i=s.call(this,"RecognitionStartedEvent",e,o)||this;return i.privAudioSourceId=t,i.privAudioNodeId=r,i.privAuthFetchEventId=n,i}return c(e,s),Object.defineProperty(e.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!0,configurable:!0}),e}(o);t.RecognitionStartedEvent=l,(u=f=t.RecognitionCompletionStatus||(t.RecognitionCompletionStatus={}))[u.Success=0]="Success",u[u.AudioSourceError=1]="AudioSourceError",u[u.AudioSourceTimeout=2]="AudioSourceTimeout",u[u.AuthTokenFetchError=3]="AuthTokenFetchError",u[u.AuthTokenFetchTimeout=4]="AuthTokenFetchTimeout",u[u.UnAuthorized=5]="UnAuthorized",u[u.ConnectTimeout=6]="ConnectTimeout",u[u.ConnectError=7]="ConnectError",u[u.ClientRecognitionActivityTimeout=8]="ClientRecognitionActivityTimeout",u[u.UnknownError=9]="UnknownError";var v=function(u){function e(e,t,r,n,o,i,s,c){var a=u.call(this,"RecognitionEndedEvent",e,o,s===f.Success?p.EventType.Info:p.EventType.Error)||this;return a.privAudioSourceId=t,a.privAudioNodeId=r,a.privAuthFetchEventId=n,a.privStatus=s,a.privError=c,a.privServiceTag=i,a}return c(e,u),Object.defineProperty(e.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authFetchEventId",{get:function(){return this.privAuthFetchEventId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"serviceTag",{get:function(){return this.privServiceTag},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"status",{get:function(){return this.privStatus},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!0,configurable:!0}),e}(o);t.RecognitionEndedEvent=v},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n,i=r(3),s=r(5);(n=o=t.MessageType||(t.MessageType={}))[n.Text=0]="Text",n[n.Binary=1]="Binary";var c=function(){function e(e,t,r,n){if(this.privBody=null,e===o.Text&&t&&"string"!=typeof t)throw new i.InvalidOperationError("Payload must be a string");if(e===o.Binary&&t&&!(t instanceof ArrayBuffer))throw new i.InvalidOperationError("Payload must be ArrayBuffer");this.privMessageType=e,this.privBody=t,this.privHeaders=r||{},this.privId=n||s.createNoDashGuid()}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"body",{get:function(){return this.privBody},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textBody",{get:function(){if(this.privMessageType===o.Binary)throw new i.InvalidOperationError("Not supported for binary message");return this.privBody},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryBody",{get:function(){if(this.privMessageType===o.Text)throw new i.InvalidOperationError("Not supported for text message");return this.privBody},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!0,configurable:!0}),e}();t.ConnectionMessage=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(3),i=r(5),n=function(){function e(e){var n=this;this.privEventListeners={},this.privIsDisposed=!1,this.onEvent=function(e){if(n.isDisposed())throw new o.ObjectDisposedError("EventSource");if(n.metadata)for(var t in n.metadata)t&&e.metadata&&(e.metadata[t]||(e.metadata[t]=n.metadata[t]));for(var r in n.privEventListeners)r&&n.privEventListeners[r]&&n.privEventListeners[r](e)},this.attach=function(e){var t=i.createNoDashGuid();return n.privEventListeners[t]=e,{detach:function(){delete n.privEventListeners[t]}}},this.attachListener=function(e){return n.attach(e.onEvent)},this.isDisposed=function(){return n.privIsDisposed},this.dispose=function(){n.privEventListeners=null,n.privIsDisposed=!0},this.privMetadata=e}return Object.defineProperty(e.prototype,"metadata",{get:function(){return this.privMetadata},enumerable:!0,configurable:!0}),e}();t.EventSource=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=function(){var r=this;this.privStore={},this.get=function(e){if(!e)throw new n.ArgumentNullError("key");return r.privStore[e]},this.getOrAdd=function(e,t){if(!e)throw new n.ArgumentNullError("key");return void 0===r.privStore[e]&&(r.privStore[e]=t),r.privStore[e]},this.set=function(e,t){if(!e)throw new n.ArgumentNullError("key");r.privStore[e]=t},this.remove=function(e){if(!e)throw new n.ArgumentNullError("key");void 0!==r.privStore[e]&&delete r.privStore[e]}};t.InMemoryStorage=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r(3),n=function n(e){var o=this;if(this.privSubscriptionIdCounter=0,this.privAddSubscriptions={},this.privRemoveSubscriptions={},this.privDisposedSubscriptions={},this.privDisposeReason=null,this.get=function(e){return o.throwIfDisposed(),o.privList[e]},this.first=function(){return o.get(0)},this.last=function(){return o.get(o.length()-1)},this.add=function(e){o.throwIfDisposed(),o.insertAt(o.privList.length,e)},this.insertAt=function(e,t){o.throwIfDisposed(),0===e?o.privList.unshift(t):e===o.privList.length?o.privList.push(t):o.privList.splice(e,0,t),o.triggerSubscriptions(o.privAddSubscriptions)},this.removeFirst=function(){return o.throwIfDisposed(),o.removeAt(0)},this.removeLast=function(){return o.throwIfDisposed(),o.removeAt(o.length()-1)},this.removeAt=function(e){return o.throwIfDisposed(),o.remove(e,1)[0]},this.remove=function(e,t){o.throwIfDisposed();var r=o.privList.splice(e,t);return o.triggerSubscriptions(o.privRemoveSubscriptions),r},this.clear=function(){o.throwIfDisposed(),o.remove(0,o.length())},this.length=function(){return o.throwIfDisposed(),o.privList.length},this.onAdded=function(e){o.throwIfDisposed();var t=o.privSubscriptionIdCounter++;return o.privAddSubscriptions[t]=e,{detach:function(){delete o.privAddSubscriptions[t]}}},this.onRemoved=function(e){o.throwIfDisposed();var t=o.privSubscriptionIdCounter++;return o.privRemoveSubscriptions[t]=e,{detach:function(){delete o.privRemoveSubscriptions[t]}}},this.onDisposed=function(e){o.throwIfDisposed();var t=o.privSubscriptionIdCounter++;return o.privDisposedSubscriptions[t]=e,{detach:function(){delete o.privDisposedSubscriptions[t]}}},this.join=function(e){return o.throwIfDisposed(),o.privList.join(e)},this.toArray=function(){var t=Array();return o.privList.forEach(function(e){t.push(e)}),t},this.any=function(e){return o.throwIfDisposed(),e?0<o.where(e).length():0<o.length()},this.all=function(e){return o.throwIfDisposed(),o.where(e).length()===o.length()},this.forEach=function(e){o.throwIfDisposed();for(var t=0;t<o.length();t++)e(o.privList[t],t)},this.select=function(e){o.throwIfDisposed();for(var t=[],r=0;r<o.privList.length;r++)t.push(e(o.privList[r],r));return new n(t)},this.where=function(e){o.throwIfDisposed();for(var t=new n,r=0;r<o.privList.length;r++)e(o.privList[r],r)&&t.add(o.privList[r]);return t},this.orderBy=function(e){return o.throwIfDisposed(),new n(o.toArray().sort(e))},this.orderByDesc=function(r){return o.throwIfDisposed(),o.orderBy(function(e,t){return r(t,e)})},this.clone=function(){return o.throwIfDisposed(),new n(o.toArray())},this.concat=function(e){return o.throwIfDisposed(),new n(o.privList.concat(e.toArray()))},this.concatArray=function(e){return o.throwIfDisposed(),new n(o.privList.concat(e))},this.isDisposed=function(){return null==o.privList},this.dispose=function(e){o.isDisposed()||(o.privDisposeReason=e,o.privList=null,o.privAddSubscriptions=null,o.privRemoveSubscriptions=null,o.triggerSubscriptions(o.privDisposedSubscriptions))},this.throwIfDisposed=function(){if(o.isDisposed())throw new s.ObjectDisposedError("List",o.privDisposeReason)},this.triggerSubscriptions=function(e){if(e)for(var t in e)t&&e[t]()},this.privList=[],e)for(var t=0,r=e;t<r.length;t++){var i=r[t];this.privList.push(i)}};t.List=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,n,c=r(3);(n=i=t.PromiseState||(t.PromiseState={}))[n.None=0]="None",n[n.Resolved=1]="Resolved",n[n.Rejected=2]="Rejected";var s=function(){function e(e){var t=this;this.throwIfError=function(){if(t.isError)throw t.error},e.on(function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!1,t.privResult=e)},function(e){t.privIsCompleted||(t.privIsCompleted=!0,t.privIsError=!0,t.privError=e)})}return Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this.privIsCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isError",{get:function(){return this.privIsError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),e}();t.PromiseResult=s;var a=function(){var r=this;this.setResult=function(e){r.privOnSetResult(e)},this.setError=function(e){r.privOnSetError(e)},this.on=function(e,t){r.privOnSetResult=e,r.privOnSetError=t}};t.PromiseResultEventSource=a;var o=function(){function e(){}return e.whenAll=function(e){if(!e||0===e.length)throw new c.ArgumentNullError("promises");for(var t=new p,r=[],n=0,o=function(){++n===e.length&&(0===r.length?t.resolve(!0):t.reject(r.join(", ")))},i=0,s=e;i<s.length;i++){s[i].on(function(e){o()},function(e){r.push(e),o()})}return t.promise()},e.fromResult=function(e){var t=new p;return t.resolve(e),t.promise()},e.fromError=function(e){var t=new p;return t.reject(e),t.promise()},e}();t.PromiseHelper=o;var u=function(e){var o=this;this.result=function(){return o.privSink.result},this.continueWith=function(r){if(!r)throw new c.ArgumentNullError("continuationCallback");var n=new p;return o.privSink.on(function(e){try{var t=r(o.privSink.result);n.resolve(t)}catch(e){n.reject(e)}},function(t){try{var e=r(o.privSink.result);n.resolve(e)}catch(e){n.reject("'Error handler for error "+t+" threw error "+e+"'")}}),n.promise()},this.onSuccessContinueWith=function(r){if(!r)throw new c.ArgumentNullError("continuationCallback");var n=new p;return o.privSink.on(function(e){try{var t=r(e);n.resolve(t)}catch(e){n.reject(e)}},function(e){n.reject(e)}),n.promise()},this.continueWithPromise=function(r){if(!r)throw new c.ArgumentNullError("continuationCallback");var n=new p;return o.privSink.on(function(e){try{var t=r(o.privSink.result);if(!t)throw new Error("'Continuation callback did not return promise'");t.on(function(e){n.resolve(e)},function(e){n.reject(e)})}catch(e){n.reject(e)}},function(t){try{var e=r(o.privSink.result);if(!e)throw new Error("Continuation callback did not return promise");e.on(function(e){n.resolve(e)},function(e){n.reject(e)})}catch(e){n.reject("'Error handler for error "+t+" threw error "+e+"'")}}),n.promise()},this.onSuccessContinueWithPromise=function(r){if(!r)throw new c.ArgumentNullError("continuationCallback");var n=new p;return o.privSink.on(function(e){try{var t=r(e);if(!t)throw new Error("Continuation callback did not return promise");t.on(function(e){n.resolve(e)},function(e){n.reject(e)})}catch(e){n.reject(e)}},function(e){n.reject(e)}),n.promise()},this.on=function(e,t){if(!e)throw new c.ArgumentNullError("successCallback");if(!t)throw new c.ArgumentNullError("errorCallback");return o.privSink.on(e,t),o},this.finally=function(t){if(!t)throw new c.ArgumentNullError("callback");var e=function(e){t()};return o.on(e,e)},this.privSink=e};t.Promise=u;var p=function(){var t=this;this.state=function(){return t.privSink.state},this.promise=function(){return t.privPromise},this.resolve=function(e){return t.privSink.resolve(e),t},this.reject=function(e){return t.privSink.reject(e),t},this.privSink=new f,this.privPromise=new u(this.privSink)};t.Deferred=p;var f=function(){function e(){var o=this;this.privState=i.None,this.privPromiseResult=null,this.privPromiseResultEvents=null,this.privSuccessHandlers=[],this.privErrorHandlers=[],this.resolve=function(e){if(o.privState!==i.None)throw new Error("'Cannot resolve a completed promise'");o.privState=i.Resolved,o.privPromiseResultEvents.setResult(e);for(var t=0;t<o.privSuccessHandlers.length;t++)o.executeSuccessCallback(e,o.privSuccessHandlers[t],o.privErrorHandlers[t]);o.detachHandlers()},this.reject=function(e){if(o.privState!==i.None)throw new Error("'Cannot reject a completed promise'");o.privState=i.Rejected,o.privPromiseResultEvents.setError(e);for(var t=0,r=o.privErrorHandlers;t<r.length;t++){var n=r[t];o.executeErrorCallback(e,n)}o.detachHandlers()},this.on=function(e,t){null==e&&(e=function(e){}),o.privState===i.None?(o.privSuccessHandlers.push(e),o.privErrorHandlers.push(t)):(o.privState===i.Resolved?o.executeSuccessCallback(o.privPromiseResult.result,e,t):o.privState===i.Rejected&&o.executeErrorCallback(o.privPromiseResult.error,t),o.detachHandlers())},this.executeSuccessCallback=function(e,t,r){try{t(e)}catch(e){o.executeErrorCallback("'Unhandled callback error: "+e+"'",r)}},this.executeErrorCallback=function(t,e){if(!e)throw new Error("'Unhandled error: "+t+"'");try{e(t)}catch(e){throw new Error("'Unhandled callback error: "+e+". InnerError: "+t+"'")}},this.detachHandlers=function(){o.privErrorHandlers=[],o.privSuccessHandlers=[]},this.privPromiseResultEvents=new a,this.privPromiseResult=new s(this.privPromiseResultEvents)}return Object.defineProperty(e.prototype,"state",{get:function(){return this.privState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"result",{get:function(){return this.privPromiseResult},enumerable:!0,configurable:!0}),e}();t.Sink=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,n,s=r(3),c=r(15),a=r(16);(n=o||(o={}))[n.Dequeue=0]="Dequeue",n[n.Peek=1]="Peek";var i=function(e){var i=this;this.privPromiseStore=new c.List,this.privIsDrainInProgress=!1,this.privIsDisposing=!1,this.privDisposeReason=null,this.enqueue=function(e){i.throwIfDispose(),i.enqueueFromPromise(a.PromiseHelper.fromResult(e))},this.enqueueFromPromise=function(e){i.throwIfDispose(),i.privPromiseStore.add(e),e.finally(function(){for(;0<i.privPromiseStore.length()&&i.privPromiseStore.first().result().isCompleted;){var e=i.privPromiseStore.removeFirst();e.result().isError||i.privList.add(e.result().result)}})},this.dequeue=function(){i.throwIfDispose();var e=new a.Deferred;return i.privSubscribers&&(i.privSubscribers.add({deferral:e,type:o.Dequeue}),i.drain()),e.promise()},this.peek=function(){i.throwIfDispose();var e=new a.Deferred;return i.privSubscribers&&(i.privSubscribers.add({deferral:e,type:o.Peek}),i.drain()),e.promise()},this.length=function(){return i.throwIfDispose(),i.privList.length()},this.isDisposed=function(){return null==i.privSubscribers},this.drainAndDispose=function(r,e){if(!i.isDisposed()&&!i.privIsDisposing){i.privDisposeReason=e,i.privIsDisposing=!0;var t=i.privSubscribers;if(t){for(;0<t.length();)t.removeFirst().deferral.resolve(void 0);i.privSubscribers===t&&(i.privSubscribers=t)}for(var n=0,o=i.privDetachables;n<o.length;n++)o[n].detach();if(0<i.privPromiseStore.length()&&r)return a.PromiseHelper.whenAll(i.privPromiseStore.toArray()).continueWith(function(){return i.privSubscribers=null,i.privList.forEach(function(e,t){r(e)}),!(i.privList=null)});i.privSubscribers=null,i.privList=null}return a.PromiseHelper.fromResult(!0)},this.dispose=function(e){i.drainAndDispose(null,e)},this.drain=function(){if(!i.privIsDrainInProgress&&!i.privIsDisposing){i.privIsDrainInProgress=!0;var e=i.privSubscribers,t=i.privList;if(e&&t){for(;0<t.length()&&0<e.length()&&!i.privIsDisposing;){var r=e.removeFirst();if(r.type===o.Peek)r.deferral.resolve(t.first());else{var n=t.removeFirst();r.deferral.resolve(n)}}i.privSubscribers===e&&(i.privSubscribers=e),i.privList===t&&(i.privList=t)}i.privIsDrainInProgress=!1}},this.throwIfDispose=function(){if(i.isDisposed()){if(i.privDisposeReason)throw new s.InvalidOperationError(i.privDisposeReason);throw new s.ObjectDisposedError("Queue")}if(i.privIsDisposing)throw new s.InvalidOperationError("Queue disposing")},this.privList=e||new c.List,this.privDetachables=[],this.privSubscribers=new c.List,this.privDetachables.push(this.privList.onAdded(this.drain))};t.Queue=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),s=r(40),n=function(){function n(e,t,r){var o=this;if(this.open=function(){if(o.privConnectionState===i.ConnectionState.Disconnected)return i.PromiseHelper.fromError("Cannot open a connection that is in "+o.privConnectionState+" state");if(o.privConnectionEstablishDeferral)return o.privConnectionEstablishDeferral.promise();o.privConnectionEstablishDeferral=new i.Deferred,o.privConnectionState=i.ConnectionState.Connecting;try{"undefined"==typeof WebSocket||n.forceNpmWebSocket?o.privWebsocketClient=new s(o.privUri):o.privWebsocketClient=new WebSocket(o.privUri),o.privWebsocketClient.binaryType="arraybuffer",o.privReceivingMessageQueue=new i.Queue,o.privDisconnectDeferral=new i.Deferred,o.privSendMessageQueue=new i.Queue,o.processSendQueue()}catch(e){return o.privConnectionEstablishDeferral.resolve(new i.ConnectionOpenResponse(500,e)),o.privConnectionEstablishDeferral.promise()}return o.onEvent(new i.ConnectionStartEvent(o.privConnectionId,o.privUri)),o.privWebsocketClient.onopen=function(e){o.privConnectionState=i.ConnectionState.Connected,o.onEvent(new i.ConnectionEstablishedEvent(o.privConnectionId)),o.privConnectionEstablishDeferral.resolve(new i.ConnectionOpenResponse(200,""))},o.privWebsocketClient.onerror=function(e){o.privConnectionState,i.ConnectionState.Connecting},o.privWebsocketClient.onclose=function(e){o.privConnectionState===i.ConnectionState.Connecting?(o.privConnectionState=i.ConnectionState.Disconnected,o.privConnectionEstablishDeferral.resolve(new i.ConnectionOpenResponse(e.code,e.reason))):o.onEvent(new i.ConnectionClosedEvent(o.privConnectionId,e.code,e.reason)),o.onClose(e.code,e.reason)},o.privWebsocketClient.onmessage=function(e){var t=(new Date).toISOString();if(o.privConnectionState===i.ConnectionState.Connected){var r=new i.Deferred;if(o.privReceivingMessageQueue.enqueueFromPromise(r.promise()),e.data instanceof ArrayBuffer){var n=new i.RawWebsocketMessage(i.MessageType.Binary,e.data);o.privMessageFormatter.toConnectionMessage(n).on(function(e){o.onEvent(new i.ConnectionMessageReceivedEvent(o.privConnectionId,t,e)),r.resolve(e)},function(e){r.reject("Invalid binary message format. Error: "+e)})}else{n=new i.RawWebsocketMessage(i.MessageType.Text,e.data);o.privMessageFormatter.toConnectionMessage(n).on(function(e){o.onEvent(new i.ConnectionMessageReceivedEvent(o.privConnectionId,t,e)),r.resolve(e)},function(e){r.reject("Invalid text message format. Error: "+e)})}}},o.privConnectionEstablishDeferral.promise()},this.send=function(t){if(o.privConnectionState!==i.ConnectionState.Connected)return i.PromiseHelper.fromError("Cannot send on connection that is in "+o.privConnectionState+" state");var r=new i.Deferred,n=new i.Deferred;return o.privSendMessageQueue.enqueueFromPromise(n.promise()),o.privMessageFormatter.fromConnectionMessage(t).on(function(e){n.resolve({Message:t,RawWebsocketMessage:e,sendStatusDeferral:r})},function(e){n.reject("Error formatting the message. "+e)}),r.promise()},this.read=function(){return o.privConnectionState!==i.ConnectionState.Connected?i.PromiseHelper.fromError("Cannot read on connection that is in "+o.privConnectionState+" state"):o.privReceivingMessageQueue.dequeue()},this.close=function(e){if(o.privWebsocketClient)return o.privConnectionState!==i.ConnectionState.Disconnected&&o.privWebsocketClient.close(1e3,e||"Normal closure by client"),o.privDisconnectDeferral.promise();var t=new i.Deferred;return t.resolve(!0),t.promise()},this.sendRawMessage=function(e){try{return e&&(o.onEvent(new i.ConnectionMessageSentEvent(o.privConnectionId,(new Date).toISOString(),e.Message)),o.privWebsocketClient.send(e.RawWebsocketMessage.payload)),i.PromiseHelper.fromResult(!0)}catch(e){return i.PromiseHelper.fromError("websocket send error: "+e)}},this.onClose=function(e,t){var r="Connection closed. "+e+": "+t;o.privConnectionState=i.ConnectionState.Disconnected,o.privDisconnectDeferral.resolve(!0),o.privReceivingMessageQueue.dispose(t),o.privReceivingMessageQueue.drainAndDispose(function(e){},r),o.privSendMessageQueue.drainAndDispose(function(e){e.sendStatusDeferral.reject(r)},r)},this.processSendQueue=function(){o.privSendMessageQueue.dequeue().on(function(t){t&&o.sendRawMessage(t).on(function(e){t.sendStatusDeferral.resolve(e),o.processSendQueue()},function(e){t.sendStatusDeferral.reject(e),o.processSendQueue()})},function(e){})},this.onEvent=function(e){o.privConnectionEvents.onEvent(e),i.Events.instance.onEvent(e)},!e)throw new i.ArgumentNullError("uri");if(!r)throw new i.ArgumentNullError("messageFormatter");this.privConnectionEvents=new i.EventSource,this.privConnectionId=t,this.privMessageFormatter=r,this.privConnectionState=i.ConnectionState.None,this.privUri=e}return Object.defineProperty(n.prototype,"state",{get:function(){return this.privConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"events",{get:function(){return this.privConnectionEvents},enumerable:!0,configurable:!0}),n.forceNpmWebSocket=!1,n}();t.WebsocketMessageAdapter=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(5),s=r(1),c=r(0),a=r(7),u=4096,p=function(){function e(){}return e.createPushStream=function(e){return f.create(e)},e.createPullStream=function(e,t){return v.create(e,t)},e}(),f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t.create=function(e){return new l(e)},t}(t.AudioInputStream=p),l=function(r){function e(e){var t=r.call(this)||this;return t.privStream=new s.Stream,t.onEvent=function(e){t.privEvents.onEvent(e),s.Events.instance.onEvent(e)},t.privFormat=void 0===e?a.AudioStreamFormatImpl.getDefaultInputFormat():e,t.privEvents=new s.EventSource,t.privId=i.createNoDashGuid(),t}return o(e,r),Object.defineProperty(e.prototype,"format",{get:function(){return this.privFormat},enumerable:!0,configurable:!0}),e.prototype.write=function(e){var t;for(t=4095;t<e.byteLength;t+=u)this.privStream.write(e.slice(t-4095,t+1));t-4095!==e.byteLength&&this.privStream.write(e.slice(t-4095,e.byteLength))},e.prototype.close=function(){this.privStream.close()},e.prototype.id=function(){return this.privId},e.prototype.turnOn=function(){return this.onEvent(new s.AudioSourceInitializingEvent(this.privId)),this.onEvent(new s.AudioSourceReadyEvent(this.privId)),s.PromiseHelper.fromResult(!0)},e.prototype.attach=function(t){var r=this;return this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,t)),this.turnOn().onSuccessContinueWith(function(e){return r.privStream.getReader()}).onSuccessContinueWith(function(e){return r.onEvent(new s.AudioStreamNodeAttachedEvent(r.privId,t)),{detach:function(){e.close(),r.onEvent(new s.AudioStreamNodeDetachedEvent(r.privId,t)),r.turnOff()},id:function(){return t},read:function(){return e.read()}}})},e.prototype.detach=function(e){this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e))},e.prototype.turnOff=function(){return s.PromiseHelper.fromResult(!1)},Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!0,configurable:!0}),e}(t.PushAudioInputStream=f);t.PushAudioInputStreamImpl=l;var v=function(e){function t(){return e.call(this)||this}return o(t,e),t.create=function(e,t){return new d(e,t)},t}(p),d=function(n){function e(e,t){var r=n.call(this)||this;return r.onEvent=function(e){r.privEvents.onEvent(e),s.Events.instance.onEvent(e)},r.privFormat=void 0===t?c.AudioStreamFormat.getDefaultInputFormat():t,r.privEvents=new s.EventSource,r.privId=i.createNoDashGuid(),r.privCallback=e,r.privIsClosed=!1,r}return o(e,n),Object.defineProperty(e.prototype,"format",{get:function(){return this.privFormat},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.privIsClosed=!0,this.privCallback.close()},e.prototype.id=function(){return this.privId},e.prototype.turnOn=function(){return this.onEvent(new s.AudioSourceInitializingEvent(this.privId)),this.onEvent(new s.AudioSourceReadyEvent(this.privId)),s.PromiseHelper.fromResult(!0)},e.prototype.attach=function(t){var r=this;return this.onEvent(new s.AudioStreamNodeAttachingEvent(this.privId,t)),this.turnOn().onSuccessContinueWith(function(e){return r.onEvent(new s.AudioStreamNodeAttachedEvent(r.privId,t)),{detach:function(){r.privCallback.close(),r.onEvent(new s.AudioStreamNodeDetachedEvent(r.privId,t)),r.turnOff()},id:function(){return t},read:function(){var e=new ArrayBuffer(u),t=r.privCallback.read(e);return s.PromiseHelper.fromResult({buffer:e.slice(0,t),isEnd:r.privIsClosed})}}})},e.prototype.detach=function(e){this.onEvent(new s.AudioStreamNodeDetachedEvent(this.privId,e))},e.prototype.turnOff=function(){return s.PromiseHelper.fromResult(!1)},Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!0,configurable:!0}),e}(t.PullAudioInputStream=v);t.PullAudioInputStreamImpl=d},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=r(6),f=r(2),n=r(1),l=r(0),v=r(2),d=r(69),o=function(){function e(){var u=this;this.create=function(e,t,r){var n=e.parameters.getProperty(l.PropertyId.SpeechServiceConnection_Endpoint,void 0),o={},i=e.parameters.getProperty(l.PropertyId.SpeechServiceConnection_EndpointId,void 0),s=e.parameters.getProperty(l.PropertyId.SpeechServiceConnection_RecoLanguage,void 0);if(i?n&&-1!==n.search(d.QueryParameterNames.DeploymentIdParamName)||(o[d.QueryParameterNames.DeploymentIdParamName]=i):s&&(n&&-1!==n.search(d.QueryParameterNames.LanguageParamName)||(o[d.QueryParameterNames.LanguageParamName]=s)),n&&-1!==n.search(d.QueryParameterNames.FormatParamName)||(o[d.QueryParameterNames.FormatParamName]=e.parameters.getProperty(f.OutputFormatPropertyName,l.OutputFormat[l.OutputFormat.Simple]).toLowerCase()),u.isDebugModeEnabled&&(o[d.QueryParameterNames.TestHooksParamName]="1"),!n){var c=e.parameters.getProperty(l.PropertyId.SpeechServiceConnection_Region,void 0);switch(e.recognitionMode){case v.RecognitionMode.Conversation:n=u.host(c)+u.conversationRelativeUri;break;case v.RecognitionMode.Dictation:n=u.host(c)+u.dictationRelativeUri;break;default:n=u.host(c)+u.interactiveRelativeUri}}var a={};return a[t.headerName]=t.token,a[d.QueryParameterNames.ConnectionIdHeader]=r,new p.WebsocketConnection(n,o,a,new v.WebsocketMessageFormatter,r)}}return e.prototype.host=function(e){return n.Storage.local.getOrAdd("Host","wss://"+e+".stt.speech.microsoft.com")},Object.defineProperty(e.prototype,"interactiveRelativeUri",{get:function(){return n.Storage.local.getOrAdd("InteractiveRelativeUri","/speech/recognition/interactive/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"conversationRelativeUri",{get:function(){return n.Storage.local.getOrAdd("ConversationRelativeUri","/speech/recognition/conversation/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dictationRelativeUri",{get:function(){return n.Storage.local.getOrAdd("DictationRelativeUri","/speech/recognition/dictation/cognitiveservices/v1")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isDebugModeEnabled",{get:function(){return"true"===n.Storage.local.getOrAdd("IsDebugModeEnabled","false").toLowerCase()},enumerable:!0,configurable:!0}),e}();t.SpeechConnectionFactory=o},function(e,t,r){window.SpeechSDK=r(22)},function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n=t(6);t(1).Events.instance.attachListener(new n.ConsoleLoggingListener),function(e){for(var t in e)r.hasOwnProperty(t)||(r[t]=e[t])}(t(0))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(e){void 0===e&&(e=n.EventType.Warning);var r=this;this.onEvent=function(e){if(e.eventType>=r.privLogLevelFilter){var t=r.toString(e);switch(e.eventType){case n.EventType.Debug:console.debug(t);break;case n.EventType.Info:console.info(t);break;case n.EventType.Warning:console.warn(t);break;case n.EventType.Error:console.error(t);break;default:console.log(t)}}},this.toString=function(e){var t=[""+e.EventTime,""+e.Name];for(var r in e)if(r&&e.hasOwnProperty(r)&&"eventTime"!==r&&"eventType"!==r&&"eventId"!==r&&"name"!==r&&"constructor"!==r){var n=e[r],o="<NULL>";null!=n&&(o="number"==typeof n||"string"==typeof n?n.toString():JSON.stringify(n)),t.push(r+": "+o)}return t.join(" | ")},this.privLogLevelFilter=e};t.ConsoleLoggingListener=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(8),o=function(o){function e(e,t,r){void 0===r&&(r=s.EventType.Info);var n=o.call(this,e,r)||this;return n.privAudioSourceId=t,n}return i(e,o),Object.defineProperty(e.prototype,"audioSourceId",{get:function(){return this.privAudioSourceId},enumerable:!0,configurable:!0}),e}(s.PlatformEvent),c=function(t){function e(e){return t.call(this,"AudioSourceInitializingEvent",e)||this}return i(e,t),e}(t.AudioSourceEvent=o);t.AudioSourceInitializingEvent=c;var a=function(t){function e(e){return t.call(this,"AudioSourceReadyEvent",e)||this}return i(e,t),e}(o);t.AudioSourceReadyEvent=a;var u=function(t){function e(e){return t.call(this,"AudioSourceOffEvent",e)||this}return i(e,t),e}(o);t.AudioSourceOffEvent=u;var p=function(n){function e(e,t){var r=n.call(this,"AudioSourceErrorEvent",e,s.EventType.Error)||this;return r.privError=t,r}return i(e,n),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!0,configurable:!0}),e}(o);t.AudioSourceErrorEvent=p;var f=function(o){function e(e,t,r){var n=o.call(this,e,t)||this;return n.privAudioNodeId=r,n}return i(e,o),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!0,configurable:!0}),e}(o),l=function(r){function e(e,t){return r.call(this,"AudioStreamNodeAttachingEvent",e,t)||this}return i(e,r),e}(t.AudioStreamNodeEvent=f);t.AudioStreamNodeAttachingEvent=l;var v=function(r){function e(e,t){return r.call(this,"AudioStreamNodeAttachedEvent",e,t)||this}return i(e,r),e}(f);t.AudioStreamNodeAttachedEvent=v;var d=function(r){function e(e,t){return r.call(this,"AudioStreamNodeDetachedEvent",e,t)||this}return i(e,r),e}(f);t.AudioStreamNodeDetachedEvent=d;var h=function(o){function e(e,t,r){var n=o.call(this,"AudioStreamNodeErrorEvent",e,t)||this;return n.privError=r,n}return i(e,o),Object.defineProperty(e.prototype,"error",{get:function(){return this.privError},enumerable:!0,configurable:!0}),e}(f);t.AudioStreamNodeErrorEvent=h},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(8),o=function(o){function e(e,t,r){void 0===r&&(r=s.EventType.Info);var n=o.call(this,e,r)||this;return n.privConnectionId=t,n}return i(e,o),Object.defineProperty(e.prototype,"connectionId",{get:function(){return this.privConnectionId},enumerable:!0,configurable:!0}),e}(s.PlatformEvent),c=function(o){function e(e,t,r){var n=o.call(this,"ConnectionStartEvent",e)||this;return n.privUri=t,n.privHeaders=r,n}return i(e,o),Object.defineProperty(e.prototype,"uri",{get:function(){return this.privUri},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"headers",{get:function(){return this.privHeaders},enumerable:!0,configurable:!0}),e}(t.ConnectionEvent=o);t.ConnectionStartEvent=c;var a=function(r){function e(e,t){return r.call(this,"ConnectionEstablishedEvent",e)||this}return i(e,r),e}(o);t.ConnectionEstablishedEvent=a;var u=function(o){function e(e,t,r){var n=o.call(this,"ConnectionClosedEvent",e,s.EventType.Debug)||this;return n.privRreason=r,n.privStatusCode=t,n}return i(e,o),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privRreason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!0,configurable:!0}),e}(o);t.ConnectionClosedEvent=u;var p=function(o){function e(e,t,r){var n=o.call(this,"ConnectionEstablishErrorEvent",e,s.EventType.Error)||this;return n.privStatusCode=t,n.privReason=r,n}return i(e,o),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!0,configurable:!0}),e}(o);t.ConnectionEstablishErrorEvent=p;var f=function(o){function e(e,t,r){var n=o.call(this,"ConnectionMessageReceivedEvent",e)||this;return n.privNetworkReceivedTime=t,n.privMessage=r,n}return i(e,o),Object.defineProperty(e.prototype,"networkReceivedTime",{get:function(){return this.privNetworkReceivedTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.privMessage},enumerable:!0,configurable:!0}),e}(o);t.ConnectionMessageReceivedEvent=f;var l=function(o){function e(e,t,r){var n=o.call(this,"ConnectionMessageSentEvent",e)||this;return n.privNetworkSentTime=t,n.privMessage=r,n}return i(e,o),Object.defineProperty(e.prototype,"networkSentTime",{get:function(){return this.privNetworkSentTime},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this.privMessage},enumerable:!0,configurable:!0}),e}(o);t.ConnectionMessageSentEvent=l},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.privStatusCode=e,this.privReason=t}return Object.defineProperty(e.prototype,"statusCode",{get:function(){return this.privStatusCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),e}();t.ConnectionOpenResponse=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=r(13),i=function(){function t(){}return Object.defineProperty(t,"instance",{get:function(){return t.privInstance},enumerable:!0,configurable:!0}),t.privInstance=new o.EventSource,t.setEventSource=function(e){if(!e)throw new n.ArgumentNullError("eventSource");t.privInstance=e},t}();t.Events=i},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ConnectionState||(t.ConnectionState={}))[n.None=0]="None",n[n.Connected=1]="Connected",n[n.Connecting=2]="Connecting",n[n.Disconnected=3]="Disconnected"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(12),o=r(3),i=r(5),s=function(){function e(e,t,r){if(this.privPayload=null,!t)throw new o.ArgumentNullError("payload");if(e===n.MessageType.Binary&&!(t instanceof ArrayBuffer))throw new o.InvalidOperationError("Payload must be ArrayBuffer");if(e===n.MessageType.Text&&"string"!=typeof t)throw new o.InvalidOperationError("Payload must be a string");this.privMessageType=e,this.privPayload=t,this.privId=r||i.createNoDashGuid()}return Object.defineProperty(e.prototype,"messageType",{get:function(){return this.privMessageType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this.privPayload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"textContent",{get:function(){if(this.privMessageType===n.MessageType.Binary)throw new o.InvalidOperationError("Not supported for binary message");return this.privPayload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"binaryContent",{get:function(){if(this.privMessageType===n.MessageType.Text)throw new o.InvalidOperationError("Not supported for text message");return this.privPayload},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!0,configurable:!0}),e}();t.RawWebsocketMessage=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){var a=this;this.privChannelCount=1,this.encode=function(e,t){var r=a.downSampleAudioFrame(t,a.privActualSampleRate,a.privDesiredSampleRate);if(!r)return null;var n=2*r.length;if(!e){var o=new ArrayBuffer(n),i=new DataView(o);return a.floatTo16BitPCM(i,0,r),o}var s=new ArrayBuffer(44+n),c=new DataView(s);return a.setString(c,0,"RIFF"),c.setUint32(4,0,!0),a.setString(c,8,"WAVEfmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,a.privChannelCount,!0),c.setUint32(24,a.privDesiredSampleRate,!0),c.setUint32(28,a.privDesiredSampleRate*a.privChannelCount*2,!0),c.setUint16(32,2*a.privChannelCount,!0),c.setUint16(34,16,!0),a.setString(c,36,"data"),c.setUint32(40,0,!0),a.floatTo16BitPCM(c,44,r),s},this.setString=function(e,t,r){for(var n=0;n<r.length;n++)e.setUint8(t+n,r.charCodeAt(n))},this.floatTo16BitPCM=function(e,t,r){for(var n=0;n<r.length;n++,t+=2){var o=Math.max(-1,Math.min(1,r[n]));e.setInt16(t,o<0?32768*o:32767*o,!0)}},this.downSampleAudioFrame=function(e,t,r){if(r===t||t<r)return e;for(var n=t/r,o=Math.round(e.length/n),i=new Float32Array(o),s=0,c=0;c<o;){for(var a=Math.round((c+1)*n),u=0,p=0;s<a&&s<e.length;)u+=e[s++],p++;i[c++]=u/p}return i},this.privActualSampleRate=e,this.privDesiredSampleRate=t};t.RiffPcmEncoder=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(3),o=r(14),i=function(){function t(){}return Object.defineProperty(t,"session",{get:function(){return t.privSessionStorage},enumerable:!0,configurable:!0}),Object.defineProperty(t,"local",{get:function(){return t.privLocalStorage},enumerable:!0,configurable:!0}),t.privSessionStorage=new o.InMemoryStorage,t.privLocalStorage=new o.InMemoryStorage,t.setSessionStorage=function(e){if(!e)throw new n.ArgumentNullError("sessionStorage");t.privSessionStorage=e},t.setLocalStorage=function(e){if(!e)throw new n.ArgumentNullError("localStorage");t.privLocalStorage=e},t}();t.Storage=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(3),n=r(5),s=r(17),o=function(){function e(e){var o=this;this.privReaderIdCounter=1,this.privIsEnded=!1,this.write=function(e){o.throwIfClosed(),o.writeStreamChunk({buffer:e,isEnd:!1})},this.getReader=function(){var e=o.privReaderIdCounter;o.privReaderIdCounter++;var t=new s.Queue,r=o.privStreambuffer.length;o.privReaderQueues[e]=t;for(var n=0;n<r;n++)t.enqueue(o.privStreambuffer[n]);return new c(o.privId,t,function(){delete o.privReaderQueues[e]})},this.close=function(){o.privIsEnded||(o.writeStreamChunk({buffer:null,isEnd:!0}),o.privIsEnded=!0)},this.writeStreamChunk=function(e){for(var t in o.throwIfClosed(),o.privStreambuffer.push(e),o.privReaderQueues)if(!o.privReaderQueues[t].isDisposed())try{o.privReaderQueues[t].enqueue(e)}catch(e){}},this.throwIfClosed=function(){if(o.privIsEnded)throw new i.InvalidOperationError("Stream closed")},this.privId=e||n.createNoDashGuid(),this.privStreambuffer=[],this.privReaderQueues={}}return Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsEnded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!0,configurable:!0}),e}();t.Stream=o;var c=function(){function e(e,t,r){var n=this;this.privIsClosed=!1,this.read=function(){if(n.isClosed)throw new i.InvalidOperationError("StreamReader closed");return n.privReaderQueue.dequeue().onSuccessContinueWith(function(e){return e.isEnd&&n.privReaderQueue.dispose("End of stream reached"),e})},this.close=function(){n.privIsClosed||(n.privIsClosed=!0,n.privReaderQueue.dispose("StreamReader closed"),n.privOnClose())},this.privReaderQueue=t,this.privOnClose=r,this.privStreamId=e}return Object.defineProperty(e.prototype,"isClosed",{get:function(){return this.privIsClosed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"streamId",{get:function(){return this.privStreamId},enumerable:!0,configurable:!0}),e}();t.StreamReader=c},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(){this.get=function(e){if(!e)throw new n.ArgumentNullError("key");return localStorage.getItem(e)},this.getOrAdd=function(e,t){if(!e)throw new n.ArgumentNullError("key");var r=localStorage.getItem(e);return null==r&&localStorage.setItem(e,t),localStorage.getItem(e)},this.set=function(e,t){if(!e)throw new n.ArgumentNullError("key");localStorage.setItem(e,t)},this.remove=function(e){if(!e)throw new n.ArgumentNullError("key");localStorage.removeItem(e)}};t.LocalStorage=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),i=r(1),o=function(){function e(e,t,r){var o=this;this.privRecorder=e,this.privStreams={},this.turnOn=function(){if(o.privInitializeDeferral)return o.privInitializeDeferral.promise();o.privInitializeDeferral=new i.Deferred,o.createAudioContext();var n=window.navigator,e=n.getUserMedia||n.webkitGetUserMedia||n.mozGetUserMedia||n.msGetUserMedia;if(n.mediaDevices&&(e=function(e,t,r){n.mediaDevices.getUserMedia(e).then(t).catch(r)}),e){var t=function(){o.onEvent(new i.AudioSourceInitializingEvent(o.privId)),e(o.privConstraints,function(e){o.privMediaStream=e,o.onEvent(new i.AudioSourceReadyEvent(o.privId)),o.privInitializeDeferral.resolve(!0)},function(e){var t="Error occurred during microphone initialization: "+e,r=o.privInitializeDeferral;o.privInitializeDeferral=null,r.reject(t),o.onEvent(new i.AudioSourceErrorEvent(o.privId,t))})};"suspended"===o.privContext.state?o.privContext.resume().then(t,function(e){o.privInitializeDeferral.reject("Failed to initialize audio context: "+e)}):t()}else{var r="Browser does not support getUserMedia.";o.privInitializeDeferral.reject(r),o.onEvent(new i.AudioSourceErrorEvent(r,""))}return o.privInitializeDeferral.promise()},this.id=function(){return o.privId},this.attach=function(t){return o.onEvent(new i.AudioStreamNodeAttachingEvent(o.privId,t)),o.listen(t).onSuccessContinueWith(function(e){return o.onEvent(new i.AudioStreamNodeAttachedEvent(o.privId,t)),{detach:function(){e.close(),delete o.privStreams[t],o.onEvent(new i.AudioStreamNodeDetachedEvent(o.privId,t)),o.turnOff()},id:function(){return t},read:function(){return e.read()}}})},this.detach=function(e){e&&o.privStreams[e]&&(o.privStreams[e].close(),delete o.privStreams[e],o.onEvent(new i.AudioStreamNodeDetachedEvent(o.privId,e)))},this.turnOff=function(){for(var e in o.privStreams)if(e){var t=o.privStreams[e];t&&t.close()}return o.onEvent(new i.AudioSourceOffEvent(o.privId)),o.privInitializeDeferral=null,o.destroyAudioContext(),i.PromiseHelper.fromResult(!0)},this.listen=function(r){return o.turnOn().onSuccessContinueWith(function(e){var t=new i.Stream(r);o.privStreams[r]=t;try{o.privRecorder.record(o.privContext,o.privMediaStream,t)}catch(e){throw o.onEvent(new i.AudioStreamNodeErrorEvent(o.privId,r,e)),e}return t.getReader()})},this.onEvent=function(e){o.privEvents.onEvent(e),i.Events.instance.onEvent(e)},this.createAudioContext=function(){if(!o.privContext){var e=window.AudioContext||window.webkitAudioContext||!1;if(!e)throw new Error("Browser does not support Web Audio API (AudioContext is not available).");o.privContext=new e}},this.destroyAudioContext=function(){if(o.privContext){o.privRecorder.releaseMediaResources(o.privContext);var e=!1;"close"in o.privContext&&(e=!0),e?(o.privContext.close(),o.privContext=null):null!==o.privContext&&"running"===o.privContext.state&&o.privContext.suspend()}},this.privId=r||i.createNoDashGuid(),this.privEvents=new i.EventSource,this.privConstraints=t||{audio:!0,video:!1}}return Object.defineProperty(e.prototype,"format",{get:function(){return e.AUDIOFORMAT},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privEvents},enumerable:!0,configurable:!0}),e.AUDIOFORMAT=n.AudioStreamFormat.getDefaultInputFormat(),e}();t.MicAudioSource=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(7),u=r(1),o=function(){function a(e,t){var c=this;this.privStreams={},this.turnOn=function(){if("undefined"==typeof FileReader){var e="Browser does not support FileReader.";return c.onEvent(new u.AudioSourceErrorEvent(e,"")),u.PromiseHelper.fromError(e)}if(c.privFile.name.lastIndexOf(".wav")!==c.privFile.name.length-4){e=c.privFile.name+" is not supported. Only WAVE files are allowed at the moment.";return c.onEvent(new u.AudioSourceErrorEvent(e,"")),u.PromiseHelper.fromError(e)}if(c.privFile.size>a.MAX_SIZE){e=c.privFile.name+" exceeds the maximum allowed file size ("+a.MAX_SIZE+").";return c.onEvent(new u.AudioSourceErrorEvent(e,"")),u.PromiseHelper.fromError(e)}return c.onEvent(new u.AudioSourceInitializingEvent(c.privId)),c.onEvent(new u.AudioSourceReadyEvent(c.privId)),u.PromiseHelper.fromResult(!0)},this.id=function(){return c.privId},this.attach=function(t){return c.onEvent(new u.AudioStreamNodeAttachingEvent(c.privId,t)),c.upload(t).onSuccessContinueWith(function(e){return c.onEvent(new u.AudioStreamNodeAttachedEvent(c.privId,t)),{detach:function(){e.close(),delete c.privStreams[t],c.onEvent(new u.AudioStreamNodeDetachedEvent(c.privId,t)),c.turnOff()},id:function(){return t},read:function(){return e.read()}}})},this.detach=function(e){e&&c.privStreams[e]&&(c.privStreams[e].close(),delete c.privStreams[e],c.onEvent(new u.AudioStreamNodeDetachedEvent(c.privId,e)))},this.turnOff=function(){for(var e in c.privStreams)if(e){var t=c.privStreams[e];t&&!t.isClosed&&t.close()}return c.onEvent(new u.AudioSourceOffEvent(c.privId)),u.PromiseHelper.fromResult(!0)},this.upload=function(s){return c.turnOn().onSuccessContinueWith(function(e){var r=new u.Stream(s);c.privStreams[s]=r;var n=new FileReader,o=0,i=a.CHUNK_SIZE;n.onload=function(e){if(!r.isClosed)if(r.write(n.result),i<c.privFile.size){o=i,i=Math.min(i+a.CHUNK_SIZE,c.privFile.size);var t=c.privFile.slice(o,i);n.readAsArrayBuffer(t)}else r.close()},n.onerror=function(e){var t="Error occurred while processing '"+c.privFile.name+"'. "+e;throw c.onEvent(new u.AudioStreamNodeErrorEvent(c.privId,s,t)),new Error(t)};var t=c.privFile.slice(o,i);return n.readAsArrayBuffer(t),r.getReader()})},this.onEvent=function(e){c.privEvents.onEvent(e),u.Events.instance.onEvent(e)},this.privId=t||u.createNoDashGuid(),this.privEvents=new u.EventSource,this.privFile=e}return Object.defineProperty(a.prototype,"format",{get:function(){return a.FILEFORMAT},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"events",{get:function(){return this.privEvents},enumerable:!0,configurable:!0}),a.CHUNK_SIZE=2*(a.SAMPLE_RATE=32e3)/5,a.UPLOAD_INTERVAL=200,a.MAX_SIZE=600*a.SAMPLE_RATE+44,a.FILEFORMAT=n.AudioStreamFormat.getWaveFormatPCM(16e3,16,1),a}();t.FileAudioSource=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e){var o=this;this.record=function(e,t,r){var n=new MediaRecorder(t,o.privMediaRecorderOptions);n.ondataavailable=function(e){if(r){var t=new FileReader;t.readAsArrayBuffer(e.data),t.onloadend=function(e){r.write(t.result)}}},o.privMediaResources={recorder:n,stream:t},n.start(100)},this.releaseMediaResources=function(e){"inactive"!==o.privMediaResources.recorder.state&&o.privMediaResources.recorder.stop(),o.privMediaResources.stream.getTracks().forEach(function(e){return e.stop()})},this.privMediaRecorderOptions=e};t.OpusRecorder=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),n=function(){var c=this;this.record=function(n,e,o){var t=function(){var t=0;try{return n.createScriptProcessor(t,1,1)}catch(e){t=2048;for(var r=n.sampleRate;t<16384&&32e3<=r;)t<<=1,r>>=1;return n.createScriptProcessor(t,1,1)}}(),i=new a.RiffPcmEncoder(n.sampleRate,16e3),s=!0;t.onaudioprocess=function(e){var t=e.inputBuffer.getChannelData(0);if(o&&!o.isClosed){var r=i.encode(s,t);r&&(o.write(r),s=!1)}};var r=n.createMediaStreamSource(e);c.privMediaResources={scriptProcessorNode:t,source:r,stream:e},r.connect(t),t.connect(n.destination)},this.releaseMediaResources=function(e){c.privMediaResources&&(c.privMediaResources.scriptProcessorNode&&(c.privMediaResources.scriptProcessorNode.disconnect(e.destination),c.privMediaResources.scriptProcessorNode=null),c.privMediaResources.source&&(c.privMediaResources.source.disconnect(),c.privMediaResources.stream.getTracks().forEach(function(e){return e.stop()}),c.privMediaResources.source=null))}};t.PcmRecorder=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=function(){this.get=function(e){if(!e)throw new n.ArgumentNullError("key");return sessionStorage.getItem(e)},this.getOrAdd=function(e,t){if(!e)throw new n.ArgumentNullError("key");var r=sessionStorage.getItem(e);return null==r&&sessionStorage.setItem(e,t),sessionStorage.getItem(e)},this.set=function(e,t){if(!e)throw new n.ArgumentNullError("key");sessionStorage.setItem(e,t)},this.remove=function(e){if(!e)throw new n.ArgumentNullError("key");sessionStorage.removeItem(e)}};t.SessionStorage=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=r(1),f=r(18),n=function(){function e(e,t,r,n,o){var i=this;if(this.privIsDisposed=!1,this.dispose=function(){i.privIsDisposed=!0,i.privConnectionMessageAdapter&&i.privConnectionMessageAdapter.close()},this.isDisposed=function(){return i.privIsDisposed},this.state=function(){return i.privConnectionMessageAdapter.state},this.open=function(){return i.privConnectionMessageAdapter.open()},this.send=function(e){return i.privConnectionMessageAdapter.send(e)},this.read=function(){return i.privConnectionMessageAdapter.read()},!e)throw new p.ArgumentNullError("uri");if(!n)throw new p.ArgumentNullError("messageFormatter");this.privMessageFormatter=n;var s="",c=0;if(t)for(var a in t){if(a)s+=0===c&&-1===e.indexOf("?")?"?":"&",s+=a+"="+encodeURIComponent(t[a]),c++}if(r)for(var u in r){if(u)s+=0===c?"?":"&",s+=u+"="+encodeURIComponent(r[u]),c++}this.privUri=e+s,this.privId=o||p.createNoDashGuid(),this.privConnectionMessageAdapter=new f.WebsocketMessageAdapter(this.privUri,this.id,this.privMessageFormatter)}return Object.defineProperty(e.prototype,"id",{get:function(){return this.privId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"events",{get:function(){return this.privConnectionMessageAdapter.events},enumerable:!0,configurable:!0}),e}();t.WebsocketConnection=n},function(e,t,r){"use strict";e.exports=function(){throw new Error("ws does not work in the browser. Browser clients must use the native WebSocket object")}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(1),n=function(){function e(e,t){var r=this;this.privBuffers=[],this.privReplayOffset=0,this.privLastShrinkOffset=0,this.privBufferStartOffset=0,this.privBufferSerial=0,this.privBufferedBytes=0,this.privReplay=!1,this.id=function(){return r.privAudioNode.id()},this.privAudioNode=e,this.privFormat=t}return e.prototype.read=function(){var t=this;if(this.privReplay&&0!==this.privBuffers.length){var e=this.privReplayOffset-this.privBufferStartOffset,r=Math.round(e*this.privFormat.avgBytesPerSec*1e-7);0!=r%2&&r++;for(var n=0;n<this.privBuffers.length&&r>=this.privBuffers[n].buffer.byteLength;)r-=this.privBuffers[n++].buffer.byteLength;var o=this.privBuffers[n].buffer.slice(r);return this.privReplayOffset+=o.byteLength/this.privFormat.avgBytesPerSec*1e7,n===this.privBuffers.length-1&&(this.privReplay=!1),i.PromiseHelper.fromResult({buffer:o,isEnd:!1})}return this.privAudioNode.read().onSuccessContinueWith(function(e){return e.buffer&&(t.privBuffers.push(new s(e.buffer,t.privBufferSerial++,t.privBufferedBytes)),t.privBufferedBytes+=e.buffer.byteLength),e})},e.prototype.detach=function(){this.privAudioNode.detach(),this.privBuffers=void 0},e.prototype.replay=function(){0!==this.privBuffers.length&&(this.privReplay=!0,this.privReplayOffset=this.privLastShrinkOffset)},e.prototype.shrinkBuffers=function(e){for(var t=(this.privLastShrinkOffset=e)-this.privBufferStartOffset,r=Math.round(t*this.privFormat.avgBytesPerSec*1e-7),n=0;n<this.privBuffers.length&&r>=this.privBuffers[n].buffer.byteLength;)r-=this.privBuffers[n++].buffer.byteLength;this.privBufferStartOffset=Math.round(e-r/this.privFormat.avgBytesPerSec*1e7),this.privBuffers=this.privBuffers.slice(n)},e}();t.ReplayableAudioNode=n;var s=function(e,t,r){this.buffer=e,this.serial=t,this.byteOffset=r}},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(6),s=r(0),c=r(19),a=function(){function e(){}return e.fromDefaultMicrophoneInput=function(){var e=new i.PcmRecorder;return new u(new i.MicAudioSource(e))},e.fromMicrophoneInput=function(e){var t=new i.PcmRecorder;return new u(new i.MicAudioSource(t,e))},e.fromWavFileInput=function(e){return new u(new i.FileAudioSource(e))},e.fromStreamInput=function(e){if(e instanceof s.PullAudioInputStreamCallback)return new u(new c.PullAudioInputStreamImpl(e));if(e instanceof s.AudioInputStream)return new u(e);throw new Error("Not Supported Type")},e}(),u=function(r){function e(e){var t=r.call(this)||this;return t.privSource=e,t}return o(e,r),Object.defineProperty(e.prototype,"format",{get:function(){return this.privSource.format},enumerable:!0,configurable:!0}),e.prototype.close=function(){this.privSource.turnOff()},e.prototype.id=function(){return this.privSource.id()},e.prototype.turnOn=function(){return this.privSource.turnOn()},e.prototype.attach=function(e){return this.privSource.attach(e)},e.prototype.detach=function(e){return this.detach(e)},e.prototype.turnOff=function(){return this.privSource.turnOff()},Object.defineProperty(e.prototype,"events",{get:function(){return this.privSource.events},enumerable:!0,configurable:!0}),e}(t.AudioConfig=a);t.AudioConfigImpl=u},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.CancellationReason||(t.CancellationReason={}))[n.Error=0]="Error",n[n.EndOfStream=1]="EndOfStream"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){};t.PullAudioInputStreamCallback=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(4),o=function(){function e(){this.privDisposed=!1}return e.fromFile=function(e){throw n.Contracts.throwIfFileDoesNotExist(e,"fileName"),new Error("Not yet implemented.")},e.fromStream=function(e){throw n.Contracts.throwIfNull(e,"file"),new Error("Not yet implemented.")},e.prototype.close=function(){this.privDisposed||(this.privDisposed=!0)},e}();t.KeywordRecognitionModel=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.privSessionId=e}return Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!0,configurable:!0}),e}();t.SessionEventArgs=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(n){function e(e,t){var r=n.call(this,t)||this;return r.privOffset=e,r}return o(e,n),Object.defineProperty(e.prototype,"offset",{get:function(){return this.privOffset},enumerable:!0,configurable:!0}),e}(r(0).SessionEventArgs);t.RecognitionEventArgs=i},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.OutputFormat||(t.OutputFormat={}))[n.Simple=0]="Simple",n[n.Detailed=1]="Detailed"},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(o){function e(e,t,r){var n=o.call(this,t,r)||this;return n.privResult=e,n}return i(e,o),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),e}(r(0).RecognitionEventArgs);t.IntentRecognitionEventArgs=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n,o,i,s,c){this.privResultId=e,this.privReason=t,this.privText=r,this.privDuration=n,this.privOffset=o,this.privErrorDetails=i,this.privJson=s,this.privProperties=c}return Object.defineProperty(e.prototype,"resultId",{get:function(){return this.privResultId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"text",{get:function(){return this.privText},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.privDuration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offset",{get:function(){return this.privOffset},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"json",{get:function(){return this.privJson},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),e}();t.RecognitionResult=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(a){function e(e,t,r,n,o,i,s,c){return a.call(this,e,t,r,n,o,i,s,c)||this}return o(e,a),e}(r(0).RecognitionResult);t.SpeechRecognitionResult=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(p){function e(e,t,r,n,o,i,s,c,a){var u=p.call(this,t,r,n,o,i,s,c,a)||this;return u.privIntentId=e,u}return o(e,p),Object.defineProperty(e.prototype,"intentId",{get:function(){return this.privIntentId},enumerable:!0,configurable:!0}),e}(r(0).SpeechRecognitionResult);t.IntentRecognitionResult=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(4),s=function(){function e(){}return e.fromEndpoint=function(e){i.Contracts.throwIfNull(e,"uri"),i.Contracts.throwIfNullOrWhitespace(e.hostname,"uri");var t=new c,r=e.host.indexOf(".");if(-1===r)throw new Error("Could not determine region from endpoint");t.region=e.host.substr(0,r);var n=e.pathname.lastIndexOf("/")+1;if(-1===n)throw new Error("Could not determine appId from endpoint");if(t.appId=e.pathname.substr(n),t.subscriptionKey=e.searchParams.get("subscription-key"),void 0===t.subscriptionKey)throw new Error("Could not determine subscription key from endpoint");return t},e.fromAppId=function(e){i.Contracts.throwIfNullOrWhitespace(e,"appId");var t=new c;return t.appId=e,t},e.fromSubscription=function(e,t,r){i.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),i.Contracts.throwIfNullOrWhitespace(t,"appId"),i.Contracts.throwIfNullOrWhitespace(r,"region");var n=new c;return n.appId=t,n.region=r,n.subscriptionKey=e,n},e}(),c=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o(t,e),t}(t.LanguageUnderstandingModel=s);t.LanguageUnderstandingModelImpl=c},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(o){function e(e,t,r){var n=o.call(this,t,r)||this;return n.privResult=e,n}return i(e,o),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),e}(r(0).RecognitionEventArgs);t.SpeechRecognitionEventArgs=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(s){function e(e,t,r,n,o){var i=s.call(this,n,o)||this;return i.privReason=e,i.privErrorDetails=t,i.privErrorCode=r,i}return o(e,s),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),e}(r(0).RecognitionEventArgs);t.SpeechRecognitionCanceledEventArgs=i},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=function(o){function e(e,t,r){var n=o.call(this,t,r)||this;return n.privResult=e,n}return i(e,o),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),e}(r(0).RecognitionEventArgs);t.TranslationRecognitionEventArgs=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(n){function e(e,t){var r=n.call(this,t)||this;return r.privResult=e,r}return o(e,n),Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),e}(r(0).SessionEventArgs);t.TranslationSynthesisEventArgs=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(p){function e(e,t,r,n,o,i,s,c,a){var u=p.call(this,t,r,n,o,i,s,c,a)||this;return u.privTranslations=e,u}return o(e,p),Object.defineProperty(e.prototype,"translations",{get:function(){return this.privTranslations},enumerable:!0,configurable:!0}),e}(r(0).SpeechRecognitionResult);t.TranslationRecognitionResult=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.privReason=e,this.privAudio=t}return Object.defineProperty(e.prototype,"audio",{get:function(){return this.privAudio},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),e}();t.TranslationSynthesisResult=n},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.ResultReason||(t.ResultReason={}))[n.NoMatch=0]="NoMatch",n[n.Canceled=1]="Canceled",n[n.RecognizingSpeech=2]="RecognizingSpeech",n[n.RecognizedSpeech=3]="RecognizedSpeech",n[n.RecognizingIntent=4]="RecognizingIntent",n[n.RecognizedIntent=5]="RecognizedIntent",n[n.TranslatingSpeech=6]="TranslatingSpeech",n[n.TranslatedSpeech=7]="TranslatedSpeech",n[n.SynthesizingAudio=8]="SynthesizingAudio",n[n.SynthesizingAudioCompleted=9]="SynthesizingAudioCompleted"},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),s=r(4),c=r(0),a=function(){function e(){}return e.fromSubscription=function(e,t){s.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.setProperty(c.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(c.PropertyId.SpeechServiceConnection_IntentRegion,t),r.setProperty(c.PropertyId.SpeechServiceConnection_Key,e),r},e.fromEndpoint=function(e,t){s.Contracts.throwIfNull(e,"endpoint"),s.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey");var r=new u;return r.setProperty(c.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.setProperty(c.PropertyId.SpeechServiceConnection_Key,t),r},e.fromAuthorizationToken=function(e,t){s.Contracts.throwIfNull(e,"authorizationToken"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.setProperty(c.PropertyId.SpeechServiceConnection_Region,t),r.setProperty(c.PropertyId.SpeechServiceConnection_IntentRegion,t),r.authorizationToken=e,r},e.prototype.close=function(){},e}(),u=function(t){function r(){var e=t.call(this)||this;return e.privProperties=new c.PropertyCollection,e.speechRecognitionLanguage="en-US",e.outputFormat=c.OutputFormat.Simple,e}return o(r,t),Object.defineProperty(r.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endPoint",{get:function(){return new URL(this.privProperties.getProperty(c.PropertyId.SpeechServiceConnection_Endpoint))},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"subscriptionKey",{get:function(){return this.privProperties.getProperty(c.PropertyId.SpeechServiceConnection_Key)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"region",{get:function(){return this.privProperties.getProperty(c.PropertyId.SpeechServiceConnection_Region)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"authorizationToken",{get:function(){return this.privProperties.getProperty(c.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.privProperties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"speechRecognitionLanguage",{get:function(){return this.privProperties.getProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage)},set:function(e){this.privProperties.setProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"outputFormat",{get:function(){return c.OutputFormat[this.privProperties.getProperty(i.OutputFormatPropertyName,void 0)]},set:function(e){this.privProperties.setProperty(i.OutputFormatPropertyName,c.OutputFormat[e])},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"endpointId",{get:function(){return this.privProperties.getProperty(c.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privProperties.setProperty(c.PropertyId.SpeechServiceConnection_EndpointId,e)},enumerable:!0,configurable:!0}),r.prototype.setProperty=function(e,t){s.Contracts.throwIfNullOrWhitespace(t,"value"),this.privProperties.setProperty(e,t)},r.prototype.getProperty=function(e,t){return this.privProperties.getProperty(e,t)},r.prototype.clone=function(){var e=new r;return e.privProperties=this.privProperties.clone(),e},r}(t.SpeechConfig=a);t.SpeechConfigImpl=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(10),i=function(e){var t=this;if(this.fetch=function(e){return n.PromiseHelper.fromResult(t.privAuthInfo)},this.fetchOnExpiry=function(e){return n.PromiseHelper.fromResult(t.privAuthInfo)},!e)throw new n.ArgumentNullError("subscriptionKey");this.privAuthInfo=new o.AuthInfo("Ocp-Apim-Subscription-Key",e)};t.CognitiveSubscriptionKeyAuthentication=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(10),i="Authorization",s=function(e,t){var r=this;if(this.fetch=function(e){return r.privFetchCallback(e).onSuccessContinueWith(function(e){return new o.AuthInfo(i,e)})},this.fetchOnExpiry=function(e){return r.privFetchOnExpiryCallback(e).onSuccessContinueWith(function(e){return new o.AuthInfo(i,e)})},!e)throw new n.ArgumentNullError("fetchCallback");if(!t)throw new n.ArgumentNullError("fetchOnExpiryCallback");this.privFetchCallback=e,this.privFetchOnExpiryCallback=t};t.CognitiveTokenAuthentication=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),u=r(1),p=r(0),f=r(2),n=function(){function e(){var c=this;this.create=function(e,t,r){var n=e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_Endpoint);if(!n){var o=e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_IntentRegion);n=c.host()+u.Storage.local.getOrAdd("TranslationRelativeUri","/speech/"+c.getSpeechRegionFromIntentRegion(o)+"/recognition/interactive/cognitiveservices/v1")}var i={format:"simple",language:e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage)};c.isDebugModeEnabled&&(i.testhooks="1");var s={};return s[t.headerName]=t.token,s["X-ConnectionId"]=r,new a.WebsocketConnection(n,i,s,new f.WebsocketMessageFormatter,r)}}return e.prototype.host=function(){return u.Storage.local.getOrAdd("Host","wss://speech.platform.bing.com")},Object.defineProperty(e.prototype,"isDebugModeEnabled",{get:function(){return"true"===u.Storage.local.getOrAdd("IsDebugModeEnabled","false").toLowerCase()},enumerable:!0,configurable:!0}),e.prototype.getSpeechRegionFromIntentRegion=function(e){switch(e){case"West US":case"US West":case"westus":return"uswest";case"West US 2":case"US West 2":case"westus2":return"uswest2";case"South Central US":case"US South Central":case"southcentralus":return"ussouthcentral";case"West Central US":case"US West Central":case"westcentralus":return"uswestcentral";case"East US":case"US East":case"eastus":return"useast";case"East US 2":case"US East 2":case"eastus2":return"useast2";case"West Europe":case"Europe West":case"westeurope":return"europewest";case"North Europe":case"Europe North":case"northeurope":return"europenorth";case"Brazil South":case"South Brazil":case"southbrazil":return"brazilsouth";case"Australia East":case"East Australia":case"eastaustralia":return"australiaeast";case"Southeast Asia":case"Asia Southeast":case"southeastasia":return"asiasoutheast";case"East Asia":case"Asia East":case"eastasia":return"asiaeast";default:return e}},e}();t.IntentConnectionFactory=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(6),v=r(1),d=r(0),h=r(2),g=r(66),o=function(){function i(e,t,r,n,o){var l=this;if(this.sendTelemetryData=function(t,r){if(!0!==i.telemetryDataEnabled||l.privIsDisposed)return v.PromiseHelper.fromResult(!0);if(i.telemetryData)try{i.telemetryData(r)}catch(e){}return l.fetchConnection(t).onSuccessContinueWithPromise(function(e){return e.send(new g.SpeechConnectionMessage(v.MessageType.Text,"telemetry",t.requestId,"application/json",r))})},this.fetchConnection=function(e){return l.configureConnection(e)},this.configureConnection=function(r,n){if(void 0===n&&(n=!1),l.privConnectionConfigurationPromise)return l.privConnectionConfigurationPromise.result().isCompleted&&(l.privConnectionConfigurationPromise.result().isError||l.privConnectionConfigurationPromise.result().result.state()===v.ConnectionState.Disconnected)?(l.privConnectionId=null,l.privConnectionConfigurationPromise=null,l.configureConnection(r)):l.privConnectionConfigurationPromise;l.privAuthFetchEventId=v.createNoDashGuid(),l.privConnectionId=v.createNoDashGuid(),r.onPreConnectionStart(l.privAuthFetchEventId,l.privConnectionId);var e=n?l.privAuthentication.fetchOnExpiry(l.privAuthFetchEventId):l.privAuthentication.fetch(l.privAuthFetchEventId);return l.privConnectionConfigurationPromise=e.continueWithPromise(function(e){if(e.isError)throw r.onAuthCompleted(!0,e.error),new Error(e.error);r.onAuthCompleted(!1);var t=l.privConnectionFactory.create(l.privRecognizerConfig,e.result,l.privConnectionId);return r.listenForServiceTelemetry(t.events),t.open().onSuccessContinueWithPromise(function(e){return 200===e.statusCode?(r.onPreConnectionStart(l.privAuthFetchEventId,l.privConnectionId),r.onConnectionEstablishCompleted(e.statusCode),l.sendSpeechConfig(t,r,l.privRecognizerConfig.platformConfig.serialize()).onSuccessContinueWithPromise(function(e){return l.sendSpeechContext(t,r,r.contextJson).onSuccessContinueWith(function(e){return t})})):403!==e.statusCode||n?(r.onConnectionEstablishCompleted(e.statusCode,e.reason),v.PromiseHelper.fromError("Unable to contact server. StatusCode: "+e.statusCode+", "+l.privRecognizerConfig.parameters.getProperty(d.PropertyId.SpeechServiceConnection_Endpoint)+" Reason: "+e.reason)):l.configureConnection(r,!0)})}),l.privConnectionConfigurationPromise},this.receiveMessage=function(u,p,f){return l.fetchConnection(u).onSuccessContinueWithPromise(function(a){return a.read().onSuccessContinueWithPromise(function(e){if(l.privIsDisposed)return v.PromiseHelper.fromResult(!0);if(!e)return u.isCompleted?v.PromiseHelper.fromResult(!0):l.receiveMessage(u,p,f);var t=g.SpeechConnectionMessage.fromConnectionMessage(e);if(t.requestId.toLowerCase()===u.requestId.toLowerCase())switch(t.path.toLowerCase()){case"turn.start":l.privMustReportEndOfStream=!0;break;case"speech.startdetected":var r=h.SpeechDetected.fromJSON(t.textBody),n=new d.RecognitionEventArgs(r.Offset,u.sessionId);l.privRecognizer.speechStartDetected&&l.privRecognizer.speechStartDetected(l.privRecognizer,n);break;case"speech.enddetected":var o=void 0;o=0<t.textBody.length?t.textBody:"{ Offset: 0 }";var i=h.SpeechDetected.fromJSON(o);u.onServiceRecognized(i.Offset+u.currentTurnAudioOffset);var s=new d.RecognitionEventArgs(i.Offset+u.currentTurnAudioOffset,u.sessionId);l.privRecognizer.speechEndDetected&&l.privRecognizer.speechEndDetected(l.privRecognizer,s);break;case"turn.end":u.isSpeechEnded&&l.privMustReportEndOfStream&&(l.privMustReportEndOfStream=!1,l.cancelRecognitionLocal(u,d.CancellationReason.EndOfStream,d.CancellationErrorCode.NoError,void 0,p));var c=new d.SessionEventArgs(u.sessionId);if(u.onServiceTurnEndResponse(l.privRecognizerConfig.isContinuousRecognition),!l.privRecognizerConfig.isContinuousRecognition||u.isSpeechEnded)return l.privRecognizer.sessionStopped&&l.privRecognizer.sessionStopped(l.privRecognizer,c),v.PromiseHelper.fromResult(!0);l.fetchConnection(u).onSuccessContinueWith(function(e){l.sendSpeechContext(e,u,u.contextJson)});default:l.processTypeSpecificMessages(t,u,a,p,f)}return l.receiveMessage(u,p,f)})})},this.sendSpeechConfig=function(e,t,r){if(!0!==i.telemetryDataEnabled){var n={context:{system:JSON.parse(r).context.system}};r=JSON.stringify(n)}return r&&l.privConnectionId!==l.privSpeechConfigConnectionId?(l.privSpeechConfigConnectionId=l.privConnectionId,e.send(new g.SpeechConnectionMessage(v.MessageType.Text,"speech.config",t.requestId,"application/json",r))):v.PromiseHelper.fromResult(!0)},this.sendSpeechContext=function(e,t,r){return r?e.send(new g.SpeechConnectionMessage(v.MessageType.Text,"speech.context",t.requestId,"application/json",r)):v.PromiseHelper.fromResult(!0)},this.sendAudio=function(t,s){var c=new v.Deferred,a=Date.now(),u=l.privAudioSource.format,p=function(e){l.privIsDisposed||s.isSpeechEnded||s.isCompleted||l.fetchConnection(s).onSuccessContinueWith(function(i){t.read().on(function(e){if(s.isSpeechEnded)c.resolve(!0);else{var t=e.isEnd?null:e.buffer,r=i.send(new g.SpeechConnectionMessage(v.MessageType.Binary,"audio",s.requestId,null,t));if(e.isEnd)s.onSpeechEnded(),c.resolve(!0);else{var n=t.byteLength/u.avgBytesPerSec/2*1e3,o=Math.max(0,a-Date.now()+n);r.onSuccessContinueWith(function(e){setTimeout(function(){a=Date.now(),p(e)},o)})}}},function(e){s.isSpeechEnded?c.resolve(!0):c.reject(e)})})};return p(!0),c.promise()},!e)throw new v.ArgumentNullError("authentication");if(!t)throw new v.ArgumentNullError("connectionFactory");if(!r)throw new v.ArgumentNullError("audioSource");if(!n)throw new v.ArgumentNullError("recognizerConfig");this.privMustReportEndOfStream=!1,this.privAuthentication=e,this.privConnectionFactory=t,this.privAudioSource=r,this.privRecognizerConfig=n,this.privIsDisposed=!1,this.privRecognizer=o}return Object.defineProperty(i.prototype,"audioSource",{get:function(){return this.privAudioSource},enumerable:!0,configurable:!0}),i.prototype.isDisposed=function(){return this.privIsDisposed},i.prototype.dispose=function(t){this.privIsDisposed=!0,this.privConnectionConfigurationPromise&&this.privConnectionConfigurationPromise.onSuccessContinueWith(function(e){e.dispose(t)})},i.prototype.recognize=function(e,i,s){var c=this,a=new h.RequestSession(this.privAudioSource.id(),e);return a.listenForServiceTelemetry(this.privAudioSource.events),this.audioSource.attach(a.audioNodeId).continueWithPromise(function(e){var o;return e.isError?(c.cancelRecognitionLocal(a,d.CancellationReason.Error,d.CancellationErrorCode.ConnectionFailure,e.error,i),v.PromiseHelper.fromError(e.error)):(o=new n.ReplayableAudioNode(e.result,c.audioSource.format),a.onAudioSourceAttachCompleted(o,!1),c.configureConnection(a).on(function(e){var t=new d.SessionEventArgs(a.sessionId);c.privRecognizer.sessionStarted&&c.privRecognizer.sessionStarted(c.privRecognizer,t);var r=c.receiveMessage(a,i,s),n=c.sendAudio(o,a);return n.on(function(e){},function(e){c.cancelRecognitionLocal(a,d.CancellationReason.Error,d.CancellationErrorCode.RuntimeError,e,i)}),v.PromiseHelper.whenAll([r,n]).on(function(e){a.dispose(),c.sendTelemetryData(a,a.getTelemetry())},function(e){a.dispose(e),c.sendTelemetryData(a,a.getTelemetry()),c.cancelRecognitionLocal(a,d.CancellationReason.Error,d.CancellationErrorCode.RuntimeError,e,i)})},function(e){c.cancelRecognitionLocal(a,d.CancellationReason.Error,d.CancellationErrorCode.ConnectionFailure,e,i)}).on(function(){return a.completionPromise},function(e){c.cancelRecognitionLocal(a,d.CancellationReason.Error,d.CancellationErrorCode.RuntimeError,e,i)}).onSuccessContinueWithPromise(function(e){return v.PromiseHelper.fromResult(!0)}))})},i.prototype.cancelRecognitionLocal=function(e,t,r,n,o){e.isCanceled||(e.onCancelled(),this.cancelRecognition(e.sessionId,e.requestId,t,r,n,o))},i.telemetryDataEnabled=!0,i}();t.ServiceRecognizerBase=o},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var f=r(1),l="content-type",v="x-requestid",d="x-timestamp",i=function(p){function s(e,t,r,n,o,i,s){var c=this;if(!t)throw new f.ArgumentNullError("path");if(!r)throw new f.ArgumentNullError("requestId");var a={};if(a.path=t,a[v]=r,a[d]=(new Date).toISOString(),n&&(a[l]=n),i)for(var u in i)u&&(a[u]=i[u]);return(c=s?p.call(this,e,o,a,s)||this:p.call(this,e,o,a)||this).privPath=t,c.privRequestId=r,c.privContentType=n,c.privAdditionalHeaders=i,c}return o(s,p),Object.defineProperty(s.prototype,"path",{get:function(){return this.privPath},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"contentType",{get:function(){return this.privContentType},enumerable:!0,configurable:!0}),Object.defineProperty(s.prototype,"additionalHeaders",{get:function(){return this.privAdditionalHeaders},enumerable:!0,configurable:!0}),s.fromConnectionMessage=function(e){var t=null,r=null,n=null,o={};if(e.headers)for(var i in e.headers)i&&(i.toLowerCase()==="path".toLowerCase()?t=e.headers[i]:i.toLowerCase()===v.toLowerCase()?r=e.headers[i]:i.toLowerCase()===d.toLowerCase()?e.headers[i]:i.toLowerCase()===l.toLowerCase()?n=e.headers[i]:o[i]=e.headers[i]);return new s(e.messageType,t,r,n,e.body,o,e.id)},s}(f.ConnectionMessage);t.SpeechConnectionMessage=i},function(e,t,r){"use strict";var n,o,i;Object.defineProperty(t,"__esModule",{value:!0}),(o=n=t.RecognitionMode||(t.RecognitionMode={}))[o.Interactive=0]="Interactive",o[o.Conversation=1]="Conversation",o[o.Dictation=2]="Dictation",(i=t.SpeechResultFormat||(t.SpeechResultFormat={}))[i.Simple=0]="Simple",i[i.Detailed=1]="Detailed";var s=function(){function e(e,t,r){void 0===t&&(t=n.Interactive),this.privRecognitionMode=n.Interactive,this.privPlatformConfig=e||new c(new a(null)),this.privRecognitionMode=t,this.privRecognitionActivityTimeout=t===n.Interactive?8e3:25e3,this.privSpeechConfig=r}return Object.defineProperty(e.prototype,"parameters",{get:function(){return this.privSpeechConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recognitionMode",{get:function(){return this.privRecognitionMode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"platformConfig",{get:function(){return this.privPlatformConfig},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"recognitionActivityTimeout",{get:function(){return this.privRecognitionActivityTimeout},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isContinuousRecognition",{get:function(){return this.privRecognitionMode!==n.Interactive},enumerable:!0,configurable:!0}),e}();t.RecognizerConfig=s;var c=function(){function e(e){var t=this;this.serialize=function(){return JSON.stringify(t,function(e,t){if(t&&"object"==typeof t){var r={};for(var n in t)Object.hasOwnProperty.call(t,n)&&(r[n&&n.charAt(0).toLowerCase()+n.substring(1)]=t[n]);return r}return t})},this.context=e}return Object.defineProperty(e.prototype,"Context",{get:function(){return this.context},enumerable:!0,configurable:!0}),e}();t.PlatformConfig=c;var a=function(e){this.system=new u,this.os=e};t.Context=a;var u=function(){this.name="SpeechSDK",this.version="1.1.0-alpha.0.1",this.build="JavaScript",this.lang="JavaScript"};t.System=u;var p=function(e,t,r){this.platform=e,this.name=t,this.version=r};t.OS=p;var f=function(e,t,r){this.manufacturer=e,this.model=t,this.version=r};t.Device=f},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=r(1),n=function(){var f=this;this.toConnectionMessage=function(e){var t=new l.Deferred;try{if(e.messageType===l.MessageType.Text){var r=e.textContent,n={},o=null;if(r){var i=r.split("\r\n\r\n");i&&0<i.length&&(n=f.parseHeaders(i[0]),1<i.length&&(o=i[1]))}t.resolve(new l.ConnectionMessage(e.messageType,o,n,e.id))}else if(e.messageType===l.MessageType.Binary){var s=e.binaryContent;if(n={},o=null,!s||s.byteLength<2)throw new Error("Invalid binary message format. Header length missing.");var c=new DataView(s),a=c.getInt16(0);if(s.byteLength<a+2)throw new Error("Invalid binary message format. Header content missing.");for(var u="",p=0;p<a;p++)u+=String.fromCharCode(c.getInt8(p+2));n=f.parseHeaders(u),s.byteLength>a+2&&(o=s.slice(2+a)),t.resolve(new l.ConnectionMessage(e.messageType,o,n,e.id))}}catch(e){t.reject("Error formatting the message. Error: "+e)}return t.promise()},this.fromConnectionMessage=function(e){var t=new l.Deferred;try{if(e.messageType===l.MessageType.Text){var r=f.makeHeaders(e)+"\r\n"+(e.textBody?e.textBody:"");t.resolve(new l.RawWebsocketMessage(l.MessageType.Text,r,e.id))}else if(e.messageType===l.MessageType.Binary){var n=f.makeHeaders(e),o=e.binaryBody,i=new Int8Array(f.stringToArrayBuffer(n)),s=(r=new ArrayBuffer(2+i.byteLength+(o?o.byteLength:0)),new DataView(r));s.setInt16(0,i.length);for(var c=0;c<i.byteLength;c++)s.setInt8(2+c,i[c]);if(o){var a=new Int8Array(o);for(c=0;c<a.byteLength;c++)s.setInt8(2+i.byteLength+c,a[c])}t.resolve(new l.RawWebsocketMessage(l.MessageType.Binary,r,e.id))}}catch(e){t.reject("Error formatting the message. "+e)}return t.promise()},this.makeHeaders=function(e){var t="";if(e.headers)for(var r in e.headers)r&&(t+=r+": "+e.headers[r]+"\r\n");return t},this.parseHeaders=function(e){var t={};if(e){var r=e.match(/[^\r\n]+/g);if(t)for(var n=0,o=r;n<o.length;n++){var i=o[n];if(i){var s=i.indexOf(":"),c=0<s?i.substr(0,s).trim().toLowerCase():i,a=0<s&&i.length>s+1?i.substr(s+1).trim():"";t[c]=a}}}return t},this.stringToArrayBuffer=function(e){for(var t=new ArrayBuffer(e.length),r=new DataView(t),n=0;n<e.length;n++)r.setUint8(n,e.charCodeAt(n));return t}};t.WebsocketMessageFormatter=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e,"TestHooksParamName",{get:function(){return"testhooks"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"ConnectionIdHeader",{get:function(){return"X-ConnectionId"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"DeploymentIdParamName",{get:function(){return"cid"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"FormatParamName",{get:function(){return"format"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"LanguageParamName",{get:function(){return"language"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TranslationFromParamName",{get:function(){return"from"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TranslationToParamName",{get:function(){return"to"},enumerable:!0,configurable:!0}),e}();t.QueryParameterNames=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r(6),u=r(1),p=r(0),f=r(2),n=function(){function e(){var c=this;this.create=function(e,t,r){var n=e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_Endpoint,void 0);if(!n){var o=e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_Region,void 0);n=c.host(o)+u.Storage.local.getOrAdd("TranslationRelativeUri","/speech/translation/cognitiveservices/v1")}var i={from:e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_RecoLanguage),to:e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_TranslationToLanguages)};c.isDebugModeEnabled&&(i.testhooks="1");void 0!==e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&(i.voice=e.parameters.getProperty(p.PropertyId.SpeechServiceConnection_TranslationVoice),i.features="texttospeech");var s={};return s[t.headerName]=t.token,s["X-ConnectionId"]=r,new a.WebsocketConnection(n,i,s,new f.WebsocketMessageFormatter,r)}}return e.prototype.host=function(e){return u.Storage.local.getOrAdd("Host","wss://"+e+".s2s.speech.microsoft.com")},Object.defineProperty(e.prototype,"isDebugModeEnabled",{get:function(){return"true"===u.Storage.local.getOrAdd("IsDebugModeEnabled","false").toLowerCase()},enumerable:!0,configurable:!0}),e}();t.TranslationConnectionFactory=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=r(2),i=function(){function e(){}return e.implTranslateRecognitionResult=function(e){var t=n.ResultReason.Canceled;switch(e){case o.RecognitionStatus.Success:t=n.ResultReason.RecognizedSpeech;break;case o.RecognitionStatus.NoMatch:case o.RecognitionStatus.InitialSilenceTimeout:case o.RecognitionStatus.BabbleTimeout:case o.RecognitionStatus.EndOfDictation:t=n.ResultReason.NoMatch;break;case o.RecognitionStatus.Error:default:t=n.ResultReason.Canceled}return t},e.implTranslateCancelResult=function(e){var t=n.CancellationReason.EndOfStream;switch(e){case o.RecognitionStatus.Success:case o.RecognitionStatus.EndOfDictation:case o.RecognitionStatus.NoMatch:t=n.CancellationReason.EndOfStream;break;case o.RecognitionStatus.InitialSilenceTimeout:case o.RecognitionStatus.BabbleTimeout:case o.RecognitionStatus.Error:default:t=n.CancellationReason.Error}return t},e}();t.EnumTranslation=i},function(e,t,r){"use strict";var n,o;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.SynthesisStatus||(t.SynthesisStatus={}))[n.Success=0]="Success",n[n.SynthesisEnd=1]="SynthesisEnd",n[n.Error=2]="Error",(o=t.RecognitionStatus||(t.RecognitionStatus={}))[o.Success=0]="Success",o[o.NoMatch=1]="NoMatch",o[o.InitialSilenceTimeout=2]="InitialSilenceTimeout",o[o.BabbleTimeout=3]="BabbleTimeout",o[o.Error=4]="Error",o[o.EndOfDictation=5]="EndOfDictation"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function t(e){this.privSynthesisEnd=JSON.parse(e),this.privSynthesisEnd.SynthesisStatus=n.SynthesisStatus[this.privSynthesisEnd.SynthesisStatus]}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"SynthesisStatus",{get:function(){return this.privSynthesisEnd.SynthesisStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"FailureReason",{get:function(){return this.privSynthesisEnd.FailureReason},enumerable:!0,configurable:!0}),t}();t.TranslationSynthesisEnd=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(9),o=function(){function t(e){this.privTranslationHypothesis=JSON.parse(e),this.privTranslationHypothesis.Translation.TranslationStatus=n.TranslationStatus[this.privTranslationHypothesis.Translation.TranslationStatus]}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"Duration",{get:function(){return this.privTranslationHypothesis.Duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.privTranslationHypothesis.Offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Text",{get:function(){return this.privTranslationHypothesis.Text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Translation",{get:function(){return this.privTranslationHypothesis.Translation},enumerable:!0,configurable:!0}),t}();t.TranslationHypothesis=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=r(9),i=function(){function t(e){this.privTranslationPhrase=JSON.parse(e),this.privTranslationPhrase.RecognitionStatus=n.RecognitionStatus[this.privTranslationPhrase.RecognitionStatus],void 0!==this.privTranslationPhrase.Translation&&(this.privTranslationPhrase.Translation.TranslationStatus=o.TranslationStatus[this.privTranslationPhrase.Translation.TranslationStatus])}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"RecognitionStatus",{get:function(){return this.privTranslationPhrase.RecognitionStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.privTranslationPhrase.Offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Duration",{get:function(){return this.privTranslationPhrase.Duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Text",{get:function(){return this.privTranslationPhrase.Text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Translation",{get:function(){return this.privTranslationPhrase.Translation},enumerable:!0,configurable:!0}),t}();t.TranslationPhrase=i},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var a=r(1),g=r(0),y=r(2),i=function(s){function e(e,t,r,n,o){var i=s.call(this,e,t,r,n,o)||this;return i.privTranslationRecognizer=o,i}return o(e,s),e.prototype.processTypeSpecificMessages=function(e,t,r,n,o){switch(e.path.toLowerCase()){case"translation.hypothesis":var i=this.fireEventForResult(y.TranslationHypothesis.fromJSON(e.textBody),t);if(this.privTranslationRecognizer.recognizing)try{this.privTranslationRecognizer.recognizing(this.privTranslationRecognizer,i)}catch(e){}break;case"translation.phrase":this.privRecognizerConfig.isContinuousRecognition&&this.sendTelemetryData(t,t.getTelemetry());var s=y.TranslationPhrase.fromJSON(e.textBody);if(s.RecognitionStatus===y.RecognitionStatus.Success){var c=this.fireEventForResult(s,t);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,c)}catch(e){}if(n){try{n(c.result)}catch(e){o&&o(e)}o=n=void 0}break}var a=y.EnumTranslation.implTranslateRecognitionResult(s.RecognitionStatus),u=new g.TranslationRecognitionResult(void 0,t.requestId,a,s.Text,s.Duration,s.Offset,void 0,e.textBody,void 0);if(a===g.ResultReason.Canceled){var p=y.EnumTranslation.implTranslateCancelResult(s.RecognitionStatus),f=new g.TranslationRecognitionCanceledEventArgs(t.sessionId,p,null,p===g.CancellationReason.Error?g.CancellationErrorCode.ServiceError:g.CancellationErrorCode.NoError,u);if(this.privTranslationRecognizer.canceled)try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,f)}catch(e){}}else if(!t.isSpeechEnded||a!==g.ResultReason.NoMatch||s.RecognitionStatus===y.RecognitionStatus.InitialSilenceTimeout){f=new g.TranslationRecognitionEventArgs(u,0,t.sessionId);if(this.privTranslationRecognizer.recognized)try{this.privTranslationRecognizer.recognized(this.privTranslationRecognizer,f)}catch(e){}}if(n){try{n(u)}catch(e){o&&o(e)}o=n=void 0}break;case"translation.synthesis":this.sendSynthesisAudio(e.binaryBody,t.sessionId);break;case"translation.synthesis.end":var l=y.TranslationSynthesisEnd.fromJSON(e.textBody);switch(l.SynthesisStatus){case y.SynthesisStatus.Error:if(this.privTranslationRecognizer.synthesizing){var v=new g.TranslationSynthesisResult(g.ResultReason.Canceled,void 0),d=new g.TranslationSynthesisEventArgs(v,t.sessionId);try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,d)}catch(e){}}if(this.privTranslationRecognizer.canceled){var h=new g.TranslationRecognitionCanceledEventArgs(t.sessionId,g.CancellationReason.Error,l.FailureReason,g.CancellationErrorCode.ServiceError,null);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,h)}catch(e){}}break;case y.SynthesisStatus.Success:this.sendSynthesisAudio(void 0,t.sessionId)}}},e.prototype.cancelRecognition=function(e,t,r,n,o,i){if(this.privTranslationRecognizer.canceled){var s=new g.PropertyCollection;s.setProperty(y.CancellationErrorCodePropertyName,g.CancellationErrorCode[n]);var c=new g.TranslationRecognitionCanceledEventArgs(e,r,o,n,void 0);try{this.privTranslationRecognizer.canceled(this.privTranslationRecognizer,c)}catch(e){}if(i){var a=new g.TranslationRecognitionResult(void 0,t,g.ResultReason.Canceled,void 0,void 0,void 0,o,void 0,s);try{i(a)}catch(e){}}}},e.prototype.fireEventForResult=function(e,t){var r,n;if(void 0!==e.Translation.Translations){r=new g.Translations;for(var o=0,i=e.Translation.Translations;o<i.length;o++){var s=i[o];r.set(s.Language,s.Text)}}n=e instanceof y.TranslationPhrase?e.Translation.TranslationStatus===a.TranslationStatus.Success?g.ResultReason.TranslatedSpeech:g.ResultReason.RecognizedSpeech:g.ResultReason.TranslatingSpeech;var c=new g.TranslationRecognitionResult(r,t.requestId,n,e.Text,e.Duration,e.Offset,e.Translation.FailureReason,JSON.stringify(e),void 0);return new g.TranslationRecognitionEventArgs(c,e.Offset,t.sessionId)},e.prototype.sendSynthesisAudio=function(e,t){var r=void 0===e?g.ResultReason.SynthesizingAudioCompleted:g.ResultReason.SynthesizingAudio,n=new g.TranslationSynthesisResult(r,e),o=new g.TranslationSynthesisEventArgs(n,t);if(this.privTranslationRecognizer.synthesizing)try{this.privTranslationRecognizer.synthesizing(this.privTranslationRecognizer,o)}catch(e){}},e}(y.ServiceRecognizerBase);t.TranslationServiceRecognizer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.privSpeechStartDetected=JSON.parse(e)}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"Offset",{get:function(){return this.privSpeechStartDetected.Offset},enumerable:!0,configurable:!0}),t}();t.SpeechDetected=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.privSpeechHypothesis=JSON.parse(e)}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"Text",{get:function(){return this.privSpeechHypothesis.Text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.privSpeechHypothesis.Offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Duration",{get:function(){return this.privSpeechHypothesis.Duration},enumerable:!0,configurable:!0}),t}();t.SpeechHypothesis=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var d=r(0),h=r(2),i=function(s){function e(e,t,r,n,o){var i=s.call(this,e,t,r,n,o)||this;return i.privSpeechRecognizer=o,i}return o(e,s),e.prototype.processTypeSpecificMessages=function(e,t,r,n,o){var i;switch(e.path.toLowerCase()){case"speech.hypothesis":var s=h.SpeechHypothesis.fromJSON(e.textBody);i=new d.SpeechRecognitionResult(t.requestId,d.ResultReason.RecognizingSpeech,s.Text,s.Duration,s.Offset+t.currentTurnAudioOffset,void 0,e.textBody,void 0);var c=new d.SpeechRecognitionEventArgs(i,s.Duration,t.sessionId);if(this.privSpeechRecognizer.recognizing)try{this.privSpeechRecognizer.recognizing(this.privSpeechRecognizer,c)}catch(e){}break;case"speech.phrase":this.sendTelemetryData(t,t.getTelemetry());var a=h.SimpleSpeechPhrase.fromJSON(e.textBody),u=h.EnumTranslation.implTranslateRecognitionResult(a.RecognitionStatus);if(t.onServiceRecognized(t.currentTurnAudioOffset+a.Offset),d.ResultReason.Canceled===u){var p=h.EnumTranslation.implTranslateCancelResult(a.RecognitionStatus);if(i=new d.SpeechRecognitionResult(t.requestId,u,void 0,void 0,void 0,void 0,e.textBody,void 0),this.privSpeechRecognizer.canceled){var f=new d.SpeechRecognitionCanceledEventArgs(p,void 0,p===d.CancellationReason.Error?d.CancellationErrorCode.ServiceError:d.CancellationErrorCode.NoError,void 0,t.sessionId);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,f)}catch(e){}}}else if(!t.isSpeechEnded||u!==d.ResultReason.NoMatch||a.RecognitionStatus===h.RecognitionStatus.InitialSilenceTimeout){if(this.privRecognizerConfig.parameters.getProperty(h.OutputFormatPropertyName)===d.OutputFormat[d.OutputFormat.Simple])i=new d.SpeechRecognitionResult(t.requestId,u,a.DisplayText,a.Duration,a.Offset+t.currentTurnAudioOffset,void 0,e.textBody,void 0);else{var l=h.DetailedSpeechPhrase.fromJSON(e.textBody);i=new d.SpeechRecognitionResult(t.requestId,u,l.RecognitionStatus===h.RecognitionStatus.Success?l.NBest[0].Display:void 0,l.Duration,l.Offset+t.currentTurnAudioOffset,void 0,e.textBody,void 0)}var v=new d.SpeechRecognitionEventArgs(i,i.offset,t.sessionId);if(this.privSpeechRecognizer.recognized)try{this.privSpeechRecognizer.recognized(this.privSpeechRecognizer,v)}catch(e){}}if(n){try{n(i)}catch(e){o&&o(e)}o=n=void 0}}},e.prototype.cancelRecognition=function(e,t,r,n,o,i){var s=new d.PropertyCollection;if(s.setProperty(h.CancellationErrorCodePropertyName,d.CancellationErrorCode[n]),this.privSpeechRecognizer.canceled){var c=new d.SpeechRecognitionCanceledEventArgs(r,o,n,void 0,e);try{this.privSpeechRecognizer.canceled(this.privSpeechRecognizer,c)}catch(e){}}if(i){var a=new d.SpeechRecognitionResult(t,d.ResultReason.Canceled,void 0,void 0,void 0,o,void 0,s);try{i(a)}catch(e){}}},e}(h.ServiceRecognizerBase);t.SpeechServiceRecognizer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function t(e){this.privDetailedSpeechPhrase=JSON.parse(e),this.privDetailedSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privDetailedSpeechPhrase.RecognitionStatus]}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"RecognitionStatus",{get:function(){return this.privDetailedSpeechPhrase.RecognitionStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"NBest",{get:function(){return this.privDetailedSpeechPhrase.NBest},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Duration",{get:function(){return this.privDetailedSpeechPhrase.Duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.privDetailedSpeechPhrase.Offset},enumerable:!0,configurable:!0}),t}();t.DetailedSpeechPhrase=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(2),o=function(){function t(e){this.privSimpleSpeechPhrase=JSON.parse(e),this.privSimpleSpeechPhrase.RecognitionStatus=n.RecognitionStatus[this.privSimpleSpeechPhrase.RecognitionStatus]}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"RecognitionStatus",{get:function(){return this.privSimpleSpeechPhrase.RecognitionStatus},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"DisplayText",{get:function(){return this.privSimpleSpeechPhrase.DisplayText},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Offset",{get:function(){return this.privSimpleSpeechPhrase.Offset},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"Duration",{get:function(){return this.privSimpleSpeechPhrase.Duration},enumerable:!0,configurable:!0}),t}();t.SimpleSpeechPhrase=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t){this.modelImpl=e,this.intentName=t};t.AddedLmIntent=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var h=r(0),g=r(2),i=function(c){function e(e,t,r,n,o,i){var s=c.call(this,e,t,r,n,o)||this;return s.privIntentRecognizer=o,s.privIntentDataSent=i,s}return o(e,c),e.prototype.setIntents=function(e,t){this.privAddedLmIntents=e,this.privUmbrellaIntent=t},e.prototype.processTypeSpecificMessages=function(e,t,r,n,o){var i,s,c=this;switch(e.path.toLowerCase()){case"speech.hypothesis":var a=g.SpeechHypothesis.fromJSON(e.textBody);if(i=new h.IntentRecognitionResult(void 0,t.requestId,h.ResultReason.RecognizingIntent,a.Text,a.Duration,a.Offset+t.currentTurnAudioOffset,void 0,e.textBody,void 0),s=new h.IntentRecognitionEventArgs(i,a.Offset+t.currentTurnAudioOffset,t.sessionId),this.privIntentRecognizer.recognizing)try{this.privIntentRecognizer.recognizing(this.privIntentRecognizer,s)}catch(e){}break;case"speech.phrase":var u=g.SimpleSpeechPhrase.fromJSON(e.textBody);i=new h.IntentRecognitionResult(void 0,t.requestId,g.EnumTranslation.implTranslateRecognitionResult(u.RecognitionStatus),u.DisplayText,u.Duration,u.Offset+t.currentTurnAudioOffset,void 0,e.textBody,void 0),s=new h.IntentRecognitionEventArgs(i,i.offset+t.currentTurnAudioOffset,t.sessionId);!1===this.privIntentDataSent||h.ResultReason.NoMatch===s.result.reason?function(){if(c.privRecognizerConfig.isContinuousRecognition&&c.sendTelemetryData(t,t.getTelemetry()),c.privIntentRecognizer.recognized)try{c.privIntentRecognizer.recognized(c.privIntentRecognizer,s)}catch(e){}if(n){try{n(i)}catch(e){o&&o(e)}o=n=void 0}}():this.privPendingIntentArgs=s;break;case"response":if(this.privRecognizerConfig.isContinuousRecognition&&this.sendTelemetryData(t,t.getTelemetry()),s=this.privPendingIntentArgs,(this.privPendingIntentArgs=void 0)===s){if(""===e.textBody)return;s=new h.IntentRecognitionEventArgs(new h.IntentRecognitionResult,0,t.sessionId)}var p=g.IntentResponse.fromJSON(e.textBody),f=this.privAddedLmIntents[p.topScoringIntent.intent];if(void 0!==this.privUmbrellaIntent&&(f=this.privUmbrellaIntent),null!==p&&void 0!==f){var l=void 0===f.intentName?p.topScoringIntent.intent:f.intentName,v=s.result.reason;void 0!==l&&(v=h.ResultReason.RecognizedIntent);var d=void 0!==s.result.properties?s.result.properties:new h.PropertyCollection;d.setProperty(h.PropertyId.LanguageUnderstandingServiceResponse_JsonResult,e.textBody),s=new h.IntentRecognitionEventArgs(new h.IntentRecognitionResult(l,s.result.resultId,v,s.result.text,s.result.duration,s.result.offset+t.currentTurnAudioOffset,s.result.errorDetails,s.result.json,d),s.offset+t.currentTurnAudioOffset,s.sessionId)}if(this.privIntentRecognizer.recognized)try{this.privIntentRecognizer.recognized(this.privIntentRecognizer,s)}catch(e){}if(n){try{n(s.result)}catch(e){o&&o(e)}o=n=void 0}}},e.prototype.cancelRecognition=function(e,t,r,n,o,i){if(this.privIntentRecognizer.canceled){var s=new h.PropertyCollection;s.setProperty(g.CancellationErrorCodePropertyName,h.CancellationErrorCode[n]);var c=new h.IntentRecognitionCanceledEventArgs(r,o,n,void 0,void 0,e);try{this.privIntentRecognizer.canceled(this.privIntentRecognizer,c)}catch(e){}if(i){var a=new h.IntentRecognitionResult(void 0,t,h.ResultReason.Canceled,void 0,void 0,void 0,o,void 0,s);try{i(a)}catch(e){}}}},e}(g.ServiceRecognizerBase);t.IntentServiceRecognizer=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function t(e){this.privIntentResponse=JSON.parse(e)}return t.fromJSON=function(e){return new t(e)},Object.defineProperty(t.prototype,"query",{get:function(){return this.privIntentResponse.query},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"topScoringIntent",{get:function(){return this.privIntentResponse.topScoringIntent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"entities",{get:function(){return this.privIntentResponse.entities},enumerable:!0,configurable:!0}),t}();t.IntentResponse=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=r(11),s=r(86),n=function(){function e(e,t){var n=this;this.privIsDisposed=!1,this.privDetachables=new Array,this.privIsAudioNodeDetached=!1,this.privIsCompleted=!1,this.privIsSpeechEnded=!1,this.privIsCanceled=!1,this.privTurnStartAudioOffset=0,this.privLastRecoOffset=0,this.onAudioSourceAttachCompleted=function(e,t,r){n.privAudioNode=e,t?n.onComplete():n.onEvent(new i.ListeningStartedEvent(n.privRequestId,n.privSessionId,n.privAudioSourceId,n.privAudioNodeId))},this.onPreConnectionStart=function(e,t){n.privAuthFetchEventId=e,n.privSessionId=t,n.onEvent(new i.ConnectingToServiceEvent(n.privRequestId,n.privAuthFetchEventId,n.privSessionId))},this.onAuthCompleted=function(e,t){e&&n.onComplete()},this.onConnectionEstablishCompleted=function(e,t){if(200===e)return n.onEvent(new i.RecognitionStartedEvent(n.requestId,n.privAudioSourceId,n.privAudioNodeId,n.privAuthFetchEventId,n.privSessionId)),n.privAudioNode.replay(),void(n.privTurnStartAudioOffset=n.privLastRecoOffset);n.onComplete()},this.onServiceTurnEndResponse=function(e){!e||n.isSpeechEnded?n.onComplete():(n.privTurnStartAudioOffset=n.privLastRecoOffset,n.privRequestId=o.createNoDashGuid(),n.privAudioNode.replay())},this.dispose=function(e){if(!n.privIsDisposed){n.privIsDisposed=!0;for(var t=0,r=n.privDetachables;t<r.length;t++){r[t].detach()}n.privServiceTelemetryListener.dispose()}},this.getTelemetry=function(){return n.privServiceTelemetryListener.getTelemetry()},this.onEvent=function(e){n.privServiceTelemetryListener.onEvent(e),o.Events.instance.onEvent(e)},this.onComplete=function(){n.privIsCompleted||(n.privIsCompleted=!0,n.detachAudioNode())},this.detachAudioNode=function(){n.privIsAudioNodeDetached||(n.privIsAudioNodeDetached=!0,n.privAudioNode&&n.privAudioNode.detach())},this.privAudioSourceId=e,this.privRequestId=o.createNoDashGuid(),this.privAudioNodeId=o.createNoDashGuid(),this.privRequestCompletionDeferral=new o.Deferred,this.privContextJson=t,this.privServiceTelemetryListener=new s.ServiceTelemetryListener(this.privRequestId,this.privAudioSourceId,this.privAudioNodeId),this.onEvent(new i.RecognitionTriggeredEvent(this.requestId,this.privSessionId,this.privAudioSourceId,this.privAudioNodeId))}return Object.defineProperty(e.prototype,"contextJson",{get:function(){return this.privContextJson},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"requestId",{get:function(){return this.privRequestId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioNodeId",{get:function(){return this.privAudioNodeId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"completionPromise",{get:function(){return this.privRequestCompletionDeferral.promise()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isSpeechEnded",{get:function(){return this.privIsSpeechEnded},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCompleted",{get:function(){return this.privIsCompleted},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isCanceled",{get:function(){return this.privIsCanceled},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTurnAudioOffset",{get:function(){return this.privTurnStartAudioOffset},enumerable:!0,configurable:!0}),e.prototype.listenForServiceTelemetry=function(e){this.privDetachables.push(e.attachListener(this.privServiceTelemetryListener))},e.prototype.onServiceRecognized=function(e){this.privLastRecoOffset=e,this.privAudioNode.shrinkBuffers(e)},e.prototype.onCancelled=function(){this.privIsCanceled=!0},e.prototype.onSpeechEnded=function(){this.privIsSpeechEnded=!0},e}();t.RequestSession=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(1),i=r(11),n=function(e,t,r){var n=this;this.privIsDisposed=!1,this.privListeningTriggerMetric=null,this.privMicMetric=null,this.privConnectionEstablishMetric=null,this.onEvent=function(e){n.privIsDisposed||(e instanceof i.RecognitionTriggeredEvent&&e.requestId===n.privRequestId&&(n.privListeningTriggerMetric={End:e.eventTime,Name:"ListeningTrigger",Start:e.eventTime}),e instanceof o.AudioStreamNodeAttachingEvent&&e.audioSourceId===n.privAudioSourceId&&e.audioNodeId===n.privAudioNodeId&&(n.privMicStartTime=e.eventTime),e instanceof o.AudioStreamNodeAttachedEvent&&e.audioSourceId===n.privAudioSourceId&&e.audioNodeId===n.privAudioNodeId&&(n.privMicStartTime=e.eventTime),e instanceof o.AudioSourceErrorEvent&&e.audioSourceId===n.privAudioSourceId&&(n.privMicMetric||(n.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:n.privMicStartTime})),e instanceof o.AudioStreamNodeErrorEvent&&e.audioSourceId===n.privAudioSourceId&&e.audioNodeId===n.privAudioNodeId&&(n.privMicMetric||(n.privMicMetric={End:e.eventTime,Error:e.error,Name:"Microphone",Start:n.privMicStartTime})),e instanceof o.AudioStreamNodeDetachedEvent&&e.audioSourceId===n.privAudioSourceId&&e.audioNodeId===n.privAudioNodeId&&(n.privMicMetric||(n.privMicMetric={End:e.eventTime,Name:"Microphone",Start:n.privMicStartTime})),e instanceof i.ConnectingToServiceEvent&&e.requestId===n.privRequestId&&(n.privConnectionId=e.sessionId),e instanceof o.ConnectionStartEvent&&e.connectionId===n.privConnectionId&&(n.privConnectionStartTime=e.eventTime),e instanceof o.ConnectionEstablishedEvent&&e.connectionId===n.privConnectionId&&(n.privConnectionEstablishMetric||(n.privConnectionEstablishMetric={End:e.eventTime,Id:n.privConnectionId,Name:"Connection",Start:n.privConnectionStartTime})),e instanceof o.ConnectionEstablishErrorEvent&&e.connectionId===n.privConnectionId&&(n.privConnectionEstablishMetric||(n.privConnectionEstablishMetric={End:e.eventTime,Error:n.getConnectionError(e.statusCode),Id:n.privConnectionId,Name:"Connection",Start:n.privConnectionStartTime})),e instanceof o.ConnectionMessageReceivedEvent&&e.connectionId===n.privConnectionId&&e.message&&e.message.headers&&e.message.headers.path&&(n.privReceivedMessages[e.message.headers.path]||(n.privReceivedMessages[e.message.headers.path]=new Array),n.privReceivedMessages[e.message.headers.path].push(e.networkReceivedTime)))},this.getTelemetry=function(){var e=new Array;n.privListeningTriggerMetric&&e.push(n.privListeningTriggerMetric),n.privMicMetric&&e.push(n.privMicMetric),n.privConnectionEstablishMetric&&e.push(n.privConnectionEstablishMetric);var t={Metrics:e,ReceivedMessages:n.privReceivedMessages},r=JSON.stringify(t);return n.privReceivedMessages={},n.privListeningTriggerMetric=null,n.privMicMetric=null,n.privConnectionEstablishMetric=null,r},this.dispose=function(){n.privIsDisposed=!0},this.getConnectionError=function(e){switch(e){case 400:case 1002:case 1003:case 1005:case 1007:case 1008:case 1009:return"BadRequest";case 401:return"Unauthorized";case 403:return"Forbidden";case 503:case 1001:return"ServerUnavailable";case 500:case 1011:return"ServerError";case 408:case 504:return"Timeout";default:return"statuscode:"+e.toString()}},this.privRequestId=e,this.privAudioSourceId=t,this.privAudioNodeId=r,this.privReceivedMessages={}};t.ServiceTelemetryListener=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),s=r(4),c=r(0),a=function(e){function t(){return e.call(this)||this}return o(t,e),t.fromSubscription=function(e,t){s.Contracts.throwIfNullOrWhitespace(e,"subscriptionKey"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.properties.setProperty(c.PropertyId.SpeechServiceConnection_Key,e),r.properties.setProperty(c.PropertyId.SpeechServiceConnection_Region,t),r},t.fromAuthorizationToken=function(e,t){s.Contracts.throwIfNullOrWhitespace(e,"authorizationToken"),s.Contracts.throwIfNullOrWhitespace(t,"region");var r=new u;return r.properties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e),r.properties.setProperty(c.PropertyId.SpeechServiceConnection_Region,t),r},t.fromEndpoint=function(e,t){s.Contracts.throwIfNull(e,"endpoint"),s.Contracts.throwIfNullOrWhitespace(t,"subscriptionKey");var r=new u;return r.properties.setProperty(c.PropertyId.SpeechServiceConnection_Endpoint,e.href),r.properties.setProperty(c.PropertyId.SpeechServiceConnection_Key,t),r},t}(c.SpeechConfig),u=function(t){function e(){var e=t.call(this)||this;return e.privSpeechProperties=new c.PropertyCollection,e.outputFormat=c.OutputFormat.Simple,e}return o(e,t),Object.defineProperty(e.prototype,"authorizationToken",{set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(c.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speechRecognitionLanguage",{set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(c.PropertyId.SpeechServiceConnection_RecoLanguage,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subscriptionKey",{get:function(){return this.privSpeechProperties.getProperty(c.PropertyId[c.PropertyId.SpeechServiceConnection_Key])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return c.OutputFormat[this.privSpeechProperties.getProperty(i.OutputFormatPropertyName,void 0)]},set:function(e){this.privSpeechProperties.setProperty(i.OutputFormatPropertyName,c.OutputFormat[e])},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"endpointId",{get:function(){return this.privSpeechProperties.getProperty(c.PropertyId.SpeechServiceConnection_EndpointId)},set:function(e){this.privSpeechProperties.setProperty(c.PropertyId.SpeechServiceConnection_Endpoint,e)},enumerable:!0,configurable:!0}),e.prototype.addTargetLanguage=function(e){s.Contracts.throwIfNullOrWhitespace(e,"value");var t=this.targetLanguages;t.push(e),this.privSpeechProperties.setProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,t.join(","))},Object.defineProperty(e.prototype,"targetLanguages",{get:function(){return void 0!==this.privSpeechProperties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages,void 0)?this.privSpeechProperties.getProperty(c.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(","):[]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceName",{get:function(){return this.getProperty(c.PropertyId[c.PropertyId.SpeechServiceConnection_TranslationVoice])},set:function(e){s.Contracts.throwIfNullOrWhitespace(e,"value"),this.privSpeechProperties.setProperty(c.PropertyId.SpeechServiceConnection_TranslationVoice,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"region",{get:function(){return this.privSpeechProperties.getProperty(c.PropertyId.SpeechServiceConnection_Region)},enumerable:!0,configurable:!0}),e.prototype.setProperty=function(e,t){this.privSpeechProperties.setProperty(e,t)},e.prototype.getProperty=function(e,t){return this.privSpeechProperties.getProperty(e,t)},Object.defineProperty(e.prototype,"properties",{get:function(){return this.privSpeechProperties},enumerable:!0,configurable:!0}),e.prototype.close=function(){},e}(t.SpeechTranslationConfig=a);t.SpeechTranslationConfigImpl=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(0),n=function(){function r(){this.privKeys=[],this.privValues=[]}return r.prototype.getProperty=function(e,t){var r;r="string"==typeof e?e:o.PropertyId[e];for(var n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===r)return this.privValues[n];return t},r.prototype.setProperty=function(e,t){var r;r="string"==typeof e?e:o.PropertyId[e];for(var n=0;n<this.privKeys.length;n++)if(this.privKeys[n]===r)return void(this.privValues[n]=t);this.privKeys.push(r),this.privValues.push(t)},r.prototype.clone=function(){for(var e=new r,t=0;t<this.privKeys.length;t++)e.privKeys.push(this.privKeys[t]),e.privValues.push(this.privValues[t]);return e},r}();t.PropertyCollection=n},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.PropertyId||(t.PropertyId={}))[n.SpeechServiceConnection_Key=0]="SpeechServiceConnection_Key",n[n.SpeechServiceConnection_Endpoint=1]="SpeechServiceConnection_Endpoint",n[n.SpeechServiceConnection_Region=2]="SpeechServiceConnection_Region",n[n.SpeechServiceAuthorization_Token=3]="SpeechServiceAuthorization_Token",n[n.SpeechServiceAuthorization_Type=4]="SpeechServiceAuthorization_Type",n[n.SpeechServiceConnection_EndpointId=5]="SpeechServiceConnection_EndpointId",n[n.SpeechServiceConnection_TranslationToLanguages=6]="SpeechServiceConnection_TranslationToLanguages",n[n.SpeechServiceConnection_TranslationVoice=7]="SpeechServiceConnection_TranslationVoice",n[n.SpeechServiceConnection_TranslationFeatures=8]="SpeechServiceConnection_TranslationFeatures",n[n.SpeechServiceConnection_IntentRegion=9]="SpeechServiceConnection_IntentRegion",n[n.SpeechServiceConnection_RecoMode=10]="SpeechServiceConnection_RecoMode",n[n.SpeechServiceConnection_RecoLanguage=11]="SpeechServiceConnection_RecoLanguage",n[n.Speech_SessionId=12]="Speech_SessionId",n[n.SpeechServiceResponse_RequestDetailedResultTrueFalse=13]="SpeechServiceResponse_RequestDetailedResultTrueFalse",n[n.SpeechServiceResponse_RequestProfanityFilterTrueFalse=14]="SpeechServiceResponse_RequestProfanityFilterTrueFalse",n[n.SpeechServiceResponse_JsonResult=15]="SpeechServiceResponse_JsonResult",n[n.SpeechServiceResponse_JsonErrorDetails=16]="SpeechServiceResponse_JsonErrorDetails",n[n.CancellationDetails_Reason=17]="CancellationDetails_Reason",n[n.CancellationDetails_ReasonText=18]="CancellationDetails_ReasonText",n[n.CancellationDetails_ReasonDetailedText=19]="CancellationDetails_ReasonDetailedText",n[n.LanguageUnderstandingServiceResponse_JsonResult=20]="LanguageUnderstandingServiceResponse_JsonResult"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var p=r(2),f=r(1),n=r(4),l=r(0),o=function(){function e(e){this.audioConfig=void 0!==e?e:l.AudioConfig.fromDefaultMicrophoneInput(),this.privDisposed=!1}return e.prototype.close=function(){n.Contracts.throwIfDisposed(this.privDisposed),this.dispose(!0)},e.prototype.dispose=function(e){this.privDisposed||(this.privDisposed=!0)},Object.defineProperty(e,"telemetryEnabled",{get:function(){return p.ServiceRecognizerBase.telemetryDataEnabled},enumerable:!0,configurable:!0}),e.enableTelemetry=function(e){p.ServiceRecognizerBase.telemetryDataEnabled=e},e.prototype.implRecognizerSetup=function(e,r,t,n){var o="undefined"!=typeof window?"Browser":"Node",i="unknown",s="unknown";"undefined"!=typeof navigator&&(o=o+"/"+navigator.platform,i=navigator.userAgent,s=navigator.appVersion);var c=this.createRecognizerConfig(new p.PlatformConfig(new p.Context(new p.OS(o,i,s))),e),a=r.getProperty(l.PropertyId.SpeechServiceConnection_Key,void 0),u=a?new p.CognitiveSubscriptionKeyAuthentication(a):new p.CognitiveTokenAuthentication(function(e){var t=r.getProperty(l.PropertyId.SpeechServiceAuthorization_Token,void 0);return f.PromiseHelper.fromResult(t)},function(e){var t=r.getProperty(l.PropertyId.SpeechServiceAuthorization_Token,void 0);return f.PromiseHelper.fromResult(t)});return this.createServiceRecognizer(u,n,t,c)},e.prototype.implRecognizerStart=function(e,t,r,n){e.recognize(n,t,r).on(function(e){},function(e){r&&r("Runtime error: "+e)})},e}();t.Recognizer=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),c=r(20),a=r(4),u=r(0),o=function(o){function e(e,t){var r=o.call(this,t)||this;r.privDisposedSpeechRecognizer=!1;var n=e;return a.Contracts.throwIfNull(n,"speechConfig"),r.privProperties=n.properties.clone(),a.Contracts.throwIfNullOrWhitespace(n.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage),u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),r}return i(e,o),Object.defineProperty(e.prototype,"endpointId",{get:function(){return a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_EndpointId,"00000000-0000-0000-0000-000000000000")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){a.Contracts.throwIfNullOrWhitespace(e,"token"),this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"speechRecognitionLanguage",{get:function(){return a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"outputFormat",{get:function(){return a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.properties.getProperty(s.OutputFormatPropertyName,u.OutputFormat[u.OutputFormat.Simple])===u.OutputFormat[u.OutputFormat.Simple]?u.OutputFormat.Simple:u.OutputFormat.Detailed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),e.prototype.recognizeOnceAsync=function(t,r){var n=this;try{a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.implCloseExistingRecognizer(),this.privReco=this.implRecognizerSetup(s.RecognitionMode.Interactive,this.properties,this.audioConfig,new c.SpeechConnectionFactory),this.implRecognizerStart(this.privReco,function(e){n.implCloseExistingRecognizer(),t&&t(e)},function(e){n.implCloseExistingRecognizer(),r&&r(e)})}catch(e){if(r)if(e instanceof Error){var o=e;r(o.name+": "+o.message)}else r(e)}},e.prototype.startContinuousRecognitionAsync=function(e,t){try{if(a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.implCloseExistingRecognizer(),this.privReco=this.implRecognizerSetup(s.RecognitionMode.Conversation,this.properties,this.audioConfig,new c.SpeechConnectionFactory),this.implRecognizerStart(this.privReco,void 0,void 0),e){try{e()}catch(e){t&&t(e)}e=void 0}}catch(e){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)}},e.prototype.stopContinuousRecognitionAsync=function(e,t){try{if(a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.implCloseExistingRecognizer(),e)try{e()}catch(e){t&&t(e)}}catch(e){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)}},e.prototype.startKeywordRecognitionAsync=function(e,t,r){a.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")},e.prototype.stopKeywordRecognitionAsync=function(e,t){e&&e()},e.prototype.close=function(){a.Contracts.throwIfDisposed(this.privDisposedSpeechRecognizer),this.dispose(!0)},e.prototype.dispose=function(e){this.privDisposedSpeechRecognizer||(e&&(this.implCloseExistingRecognizer(),this.privDisposedSpeechRecognizer=!0),o.prototype.dispose.call(this,e))},e.prototype.createRecognizerConfig=function(e,t){return new s.RecognizerConfig(e,t,this.properties)},e.prototype.createServiceRecognizer=function(e,t,r,n){var o=r;return new s.SpeechServiceRecognizer(e,t,o,n,this)},e.prototype.implCloseExistingRecognizer=function(){this.privReco&&(this.privReco.audioSource.turnOff(),this.privReco.dispose(),this.privReco=void 0)},e}(u.Recognizer);t.SpeechRecognizer=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),c=r(4),u=r(0),o=function(o){function e(e,t){var r=this;c.Contracts.throwIfNullOrUndefined(e,"speechConfig");var n=e;return c.Contracts.throwIfNullOrUndefined(n,"speechConfig"),(r=o.call(this,t)||this).privIntentDataSent=!1,r.privAddedIntents=[],r.privAddedLmIntents={},r.privDisposedIntentRecognizer=!1,r.privProperties=n.properties,c.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage),u.PropertyId[u.PropertyId.SpeechServiceConnection_RecoLanguage]),r}return i(e,o),Object.defineProperty(e.prototype,"speechRecognitionLanguage",{get:function(){return c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.properties.getProperty(u.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(u.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.properties.setProperty(u.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),e.prototype.recognizeOnceAsync=function(t,r){var n=this;try{c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.implCloseExistingRecognizer();var e=void 0;0===Object.keys(this.privAddedLmIntents).length&&void 0===this.privUmbrellaIntent||(e=this.buildSpeechContext(),this.privIntentDataSent=!0),this.privReco=this.implRecognizerSetup(s.RecognitionMode.Interactive,this.properties,this.audioConfig,new s.IntentConnectionFactory),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent),this.implRecognizerStart(this.privReco,function(e){n.implCloseExistingRecognizer(),t&&t(e)},function(e){n.implCloseExistingRecognizer(),r&&r(e)},e)}catch(e){if(r)if(e instanceof Error){var o=e;r(o.name+": "+o.message)}else r(e)}},e.prototype.startContinuousRecognitionAsync=function(e,t){try{c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.implCloseExistingRecognizer();var r=void 0;if(0!==Object.keys(this.privAddedLmIntents).length&&(r=this.buildSpeechContext(),this.privIntentDataSent=!0),this.privReco=this.implRecognizerSetup(s.RecognitionMode.Conversation,this.properties,this.audioConfig,new s.IntentConnectionFactory),this.privReco.setIntents(this.privAddedLmIntents,this.privUmbrellaIntent),this.implRecognizerStart(this.privReco,void 0,void 0,r),e){try{e()}catch(e){t&&t(e)}e=void 0}}catch(e){if(t)if(e instanceof Error){var n=e;t(n.name+": "+n.message)}else t(e)}},e.prototype.stopContinuousRecognitionAsync=function(e,t){try{if(c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.implCloseExistingRecognizer(),e)try{e()}catch(e){t&&t(e)}}catch(e){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)}},e.prototype.startKeywordRecognitionAsync=function(e,t,r){c.Contracts.throwIfNull(e,"model"),r&&r("Not yet implemented.")},e.prototype.stopKeywordRecognitionAsync=function(e,t){e&&e()},e.prototype.addIntent=function(e,t){c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),c.Contracts.throwIfNullOrWhitespace(t,"intentId"),c.Contracts.throwIfNullOrWhitespace(e,"simplePhrase"),this.privAddedIntents.push([t,e])},e.prototype.addIntentWithLanguageModel=function(e,t,r){c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),c.Contracts.throwIfNullOrWhitespace(e,"intentId"),c.Contracts.throwIfNull(t,"model");var n=t;c.Contracts.throwIfNullOrWhitespace(n.appId,"model.appId"),this.privAddedLmIntents[e]=new s.AddedLmIntent(n,r)},e.prototype.addAllIntents=function(e,t){c.Contracts.throwIfNull(e,"model");var r=e;c.Contracts.throwIfNullOrWhitespace(r.appId,"model.appId"),this.privUmbrellaIntent=new s.AddedLmIntent(r,t)},e.prototype.close=function(){c.Contracts.throwIfDisposed(this.privDisposedIntentRecognizer),this.dispose(!0)},e.prototype.createRecognizerConfig=function(e,t){return new s.RecognizerConfig(e,t,this.properties)},e.prototype.createServiceRecognizer=function(e,t,r,n){var o=r;return new s.IntentServiceRecognizer(e,t,o,n,this,this.privIntentDataSent)},e.prototype.dispose=function(e){this.privDisposedIntentRecognizer||e&&(this.privDisposedIntentRecognizer=!0,o.prototype.dispose.call(this,e))},e.prototype.implCloseExistingRecognizer=function(){this.privReco&&(this.privReco.audioSource.turnOff(),this.privReco.dispose(),this.privReco=void 0)},e.prototype.buildSpeechContext=function(){var e,t,r,n=[];void 0!==this.privUmbrellaIntent&&(e=this.privUmbrellaIntent.modelImpl.appId,t=this.privUmbrellaIntent.modelImpl.region,r=this.privUmbrellaIntent.modelImpl.subscriptionKey);for(var o=0,i=Object.keys(this.privAddedLmIntents);o<i.length;o++){var s=i[o],c=this.privAddedLmIntents[s];if(void 0===e)e=c.modelImpl.appId;else if(e!==c.modelImpl.appId)throw new Error("Intents must all be from the same LUIS model");if(void 0===t)t=c.modelImpl.region;else if(t!==c.modelImpl.region)throw new Error("Intents must all be from the same LUIS model in a single region");if(void 0===r)r=c.modelImpl.subscriptionKey;else if(r!==c.modelImpl.subscriptionKey)throw new Error("Intents must all use the same subscription key");var a="luis/"+e+"-PRODUCTION#"+s;n.push(a)}return JSON.stringify({dgi:{ReferenceGrammars:void 0===this.privUmbrellaIntent?n:["luis/"+e+"-PRODUCTION"]},intent:{id:e,key:void 0===r?this.privProperties.getProperty(u.PropertyId[u.PropertyId.SpeechServiceConnection_Key]):r,provider:"LUIS"}})},e}(u.Recognizer);t.IntentRecognizer=o},function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var s=r(2),c=r(4),a=r(0),o=function(o){function e(e,t){var r=this,n=e;return c.Contracts.throwIfNull(n,"speechConfig"),(r=o.call(this,t)||this).privDisposedTranslationRecognizer=!1,r.privProperties=n.properties.clone(),void 0!==r.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)&&c.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationVoice]),c.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages),a.PropertyId[a.PropertyId.SpeechServiceConnection_TranslationToLanguages]),c.Contracts.throwIfNullOrWhitespace(r.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage),a.PropertyId[a.PropertyId.SpeechServiceConnection_RecoLanguage]),r}return i(e,o),Object.defineProperty(e.prototype,"speechRecognitionLanguage",{get:function(){return c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_RecoLanguage)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetLanguages",{get:function(){return c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationToLanguages).split(",")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"voiceName",{get:function(){return c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.properties.getProperty(a.PropertyId.SpeechServiceConnection_TranslationVoice,void 0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"authorizationToken",{get:function(){return this.properties.getProperty(a.PropertyId.SpeechServiceAuthorization_Token)},set:function(e){this.properties.setProperty(a.PropertyId.SpeechServiceAuthorization_Token,e)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"properties",{get:function(){return this.privProperties},enumerable:!0,configurable:!0}),e.prototype.recognizeOnceAsync=function(t,r){var n=this;try{c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.implCloseExistingRecognizer(),this.privReco=this.implRecognizerSetup(s.RecognitionMode.Conversation,this.properties,this.audioConfig,new s.TranslationConnectionFactory),this.implRecognizerStart(this.privReco,function(e){n.implCloseExistingRecognizer(),t&&t(e)},function(e){n.implCloseExistingRecognizer(),r&&r(e)})}catch(e){if(r)if(e instanceof Error){var o=e;r(o.name+": "+o.message)}else r(e)}},e.prototype.startContinuousRecognitionAsync=function(e,t){try{if(c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.implCloseExistingRecognizer(),this.privReco=this.implRecognizerSetup(s.RecognitionMode.Conversation,this.properties,this.audioConfig,new s.TranslationConnectionFactory),this.implRecognizerStart(this.privReco,void 0,void 0),e){try{e()}catch(e){t&&t(e)}e=void 0}}catch(e){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)}},e.prototype.stopContinuousRecognitionAsync=function(e,t){try{if(c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.implCloseExistingRecognizer(),e)try{e()}catch(e){t&&t(e)}}catch(e){if(t)if(e instanceof Error){var r=e;t(r.name+": "+r.message)}else t(e)}},e.prototype.close=function(){c.Contracts.throwIfDisposed(this.privDisposedTranslationRecognizer),this.dispose(!0)},e.prototype.dispose=function(e){this.privDisposedTranslationRecognizer||e&&(this.implCloseExistingRecognizer(),this.privDisposedTranslationRecognizer=!0,o.prototype.dispose.call(this,e))},e.prototype.createRecognizerConfig=function(e,t){return new s.RecognizerConfig(e,s.RecognitionMode.Conversation,this.properties)},e.prototype.createServiceRecognizer=function(e,t,r,n){var o=r;return new s.TranslationServiceRecognizer(e,t,o,n,this)},e.prototype.implCloseExistingRecognizer=function(){this.privReco&&(this.privReco.audioSource.turnOff(),this.privReco.dispose(),this.privReco=void 0)},e}(a.Recognizer);t.TranslationRecognizer=o},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(0),o=function(){function e(){this.privMap=new n.PropertyCollection}return e.prototype.get=function(e,t){return this.privMap.getProperty(e,t)},e.prototype.set=function(e,t){this.privMap.setProperty(e,t)},e}();t.Translations=o},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.NoMatchReason||(t.NoMatchReason={}))[n.NotRecognized=0]="NotRecognized",n[n.InitialSilenceTimeout=1]="InitialSilenceTimeout",n[n.InitialBabbleTimeout=2]="InitialBabbleTimeout"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r(2),i=r(0),n=function(){function n(e){this.privReason=e}return n.fromResult=function(e){var t=o.SimpleSpeechPhrase.fromJSON(e.json),r=i.NoMatchReason.NotRecognized;switch(t.RecognitionStatus){case o.RecognitionStatus.BabbleTimeout:r=i.NoMatchReason.InitialBabbleTimeout;break;case o.RecognitionStatus.InitialSilenceTimeout:r=i.NoMatchReason.InitialSilenceTimeout;break;default:r=i.NoMatchReason.NotRecognized}return new n(r)},Object.defineProperty(n.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),n}();t.NoMatchDetails=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t,r,n,o){this.privCancelReason=t,this.privErrorDetails=r,this.privResult=o,this.privSessionId=e,this.privErrorCode=n}return Object.defineProperty(e.prototype,"result",{get:function(){return this.privResult},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this.privSessionId},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privCancelReason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),e}();t.TranslationRecognitionCanceledEventArgs=n},function(e,t,r){"use strict";var n,o=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var i=function(c){function e(e,t,r,n,o,i){var s=c.call(this,n,o,i)||this;return s.privReason=e,s.privErrorDetails=t,s.privErrorCode=r,s}return o(e,c),Object.defineProperty(e.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorCode",{get:function(){return this.privErrorCode},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),e}(r(0).IntentRecognitionEventArgs);t.IntentRecognitionCanceledEventArgs=i},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r(2),s=r(0),n=function(){function o(e,t,r){this.privReason=e,this.privErrorDetails=t,this.privErrorCode=r}return o.fromResult=function(e){var t=s.CancellationReason.Error,r=s.CancellationErrorCode.NoError;if(e.json){var n=i.SimpleSpeechPhrase.fromJSON(e.json);t=i.EnumTranslation.implTranslateCancelResult(n.RecognitionStatus)}return e.properties&&(r=s.CancellationErrorCode[e.properties.getProperty(i.CancellationErrorCodePropertyName,s.CancellationErrorCode[s.CancellationErrorCode.NoError])]),new o(t,e.errorDetails,r)},Object.defineProperty(o.prototype,"reason",{get:function(){return this.privReason},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"errorDetails",{get:function(){return this.privErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(o.prototype,"ErrorCode",{get:function(){return this.privErrorCode},enumerable:!0,configurable:!0}),o}();t.CancellationDetails=n},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),(n=t.CancellationErrorCode||(t.CancellationErrorCode={}))[n.NoError=0]="NoError",n[n.AuthenticationFailure=1]="AuthenticationFailure",n[n.BadRequestParameters=2]="BadRequestParameters",n[n.TooManyRequests=3]="TooManyRequests",n[n.ConnectionFailure=4]="ConnectionFailure",n[n.ServiceTimeout=5]="ServiceTimeout",n[n.ServiceError=6]="ServiceError",n[n.RuntimeError=7]="RuntimeError"}]);